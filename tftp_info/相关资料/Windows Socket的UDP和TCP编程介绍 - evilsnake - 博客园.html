<!DOCTYPE html>
<!-- saved from url=(0046)https://www.cnblogs.com/cxq0017/p/6497352.html -->
<html lang="zh-cn" style="--olcb-folder-code-block-max-height:80vh; --cnb-code-bg:rgb(245, 245, 245); --cnb-code-font-size:12px; --cnb-code-color:rgb(68, 68, 68);"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="origin-when-cross-origin">
    <meta name="keywords" content="c++">
    <meta name="description" content="1:网络中进程之间如何通信 为了实现进程之间通信，首要解决的问题是如何唯一标识一个进程，在本地可以通过进程PID来唯一标识一个进程，但是在网络中则是行不通的，其实TCP/IP协议族已经帮我们解决了这个问题，网络层的&amp;quot;ip 地址&amp;quot;可以唯一标识网络中的主机，而&amp;quot;传输层的 协">
    <meta property="og:description" content="1:网络中进程之间如何通信 为了实现进程之间通信，首要解决的问题是如何唯一标识一个进程，在本地可以通过进程PID来唯一标识一个进程，但是在网络中则是行不通的，其实TCP/IP协议族已经帮我们解决了这个问题，网络层的&amp;quot;ip 地址&amp;quot;可以唯一标识网络中的主机，而&amp;quot;传输层的 协">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Windows Socket的UDP和TCP编程介绍 - evilsnake - 博客园</title>
    <link rel="canonical" href="https://www.cnblogs.com/cxq0017/p/6497352.html">
    <link rel="shortcut icon" id="favicon" href="https://assets.cnblogs.com/favicon.svg?v=2" type="image/svg+xml">
    
    <style>#home :not(.cnblogs_code):not(.cnblogs_Highlighter)>pre:not([highlighted]):not([class*="brush:"]) code:not(.hljs), :not(.cnblogs_code):not(.cnblogs_Highlighter)>pre:not([highlighted]):not([class*="brush:"]) code:not(.hljs) {background: rgb(245, 245, 245);
        padding: 12px;
        border: 1px solid rgb(204, 204, 204);
        border-radius: 3px;
        border-color: transparent;
        color: rgb(68, 68, 68);
        font-family: "Courier New", sans-serif;
        font-size: 12px</style><link rel="stylesheet" href="./Windows Socket的UDP和TCP编程介绍 - evilsnake - 博客园_files/blog-common.min.css">
    

    <link id="MainCss" rel="stylesheet" href="./Windows Socket的UDP和TCP编程介绍 - evilsnake - 博客园_files/bundle-red_autumnal_leaves.min.css">
        <link id="highlighter-theme-cnblogs" type="text/css" rel="stylesheet" href="./Windows Socket的UDP和TCP编程介绍 - evilsnake - 博客园_files/cnblogs.css">
    
    
    <link id="mobile-style" media="only screen and (max-width: 767px)" type="text/css" rel="stylesheet" href="./Windows Socket的UDP和TCP编程介绍 - evilsnake - 博客园_files/bundle-red_autumnal_leaves-mobile.min.css">
    
    <link type="application/rss+xml" rel="alternate" href="https://www.cnblogs.com/cxq0017/rss">
    <link type="application/rsd+xml" rel="EditURI" href="https://www.cnblogs.com/cxq0017/rsd.xml">
    <link type="application/wlwmanifest+xml" rel="wlwmanifest" href="https://www.cnblogs.com/cxq0017/wlwmanifest.xml">
    <script type="text/javascript" src="./Windows Socket的UDP和TCP编程介绍 - evilsnake - 博客园_files/encoder.js.下载"></script><script>
        var currentBlogId = 302968;
        var currentBlogApp = 'cxq0017';
        var isLogined = false;
        var isBlogOwner = false;
        var skinName = 'red_autumnal_leaves';
        var visitorUserId = '';
        var hasCustomScript = false;
        window.cb_enable_mathjax = false;
        window.mathEngine = 0;
        window.codeHighlightEngine = 1;
        window.enableCodeLineNumber = false;
        window.codeHighlightTheme = 'cnblogs';
        window.darkModeCodeHighlightTheme = 'vs2015';
        window.isDarkCodeHighlightTheme = false;
        window.isDarkModeCodeHighlightThemeDark = true;
        window.isDisableCodeHighlighter = false;
        window.enableCodeThemeTypeFollowSystem = false;
        window.enableMacStyleCodeBlock = false;
    </script>
        <script>
            window.currentPostId = 6497352;
            window.currentPostDateAdded = '2017-03-03 16:33';
        </script>
    <script src="./Windows Socket的UDP和TCP编程介绍 - evilsnake - 博客园_files/jquery-3.3.1.min.js.下载"></script>
    <script src="./Windows Socket的UDP和TCP编程介绍 - evilsnake - 博客园_files/blog-common.min.js.下载"></script><style>.medium-zoom-overlay {
  position: fixed;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  opacity: 0;
  transition: opacity 300ms;
  will-change: opacity;
}

.medium-zoom--opened .medium-zoom-overlay {
  cursor: pointer;
  cursor: zoom-out;
  opacity: 1;
}

.medium-zoom-image {
  cursor: pointer;
  cursor: zoom-in;
  /*
    The `transition` is marked as "!important" for the animation to happen
    even though it's overriden by another inline `transition` style attribute.

    This is problematic with frameworks that generate inline styles on their
    images (e.g. Gatsby).

    See https://github.com/francoischalifour/medium-zoom/issues/110
   */
  transition: transform 300ms cubic-bezier(0.2, 0, 0.2, 1) !important;
}

.medium-zoom-image--hidden {
  visibility: hidden;
}

.medium-zoom-image--opened {
  position: relative;
  cursor: pointer;
  cursor: zoom-out;
  will-change: transform;
}
</style><script id="hljs-script" src="./Windows Socket的UDP和TCP编程介绍 - evilsnake - 博客园_files/highlight.min.js.下载" type="text/javascript" async=""></script>
    
<meta property="og:image" content="https://images2015.cnblogs.com/blog/1019006/201703/1019006-20170303102450938-370999484.png"></head>
<body class="skin-red_autumnal_leaves has-navbar">
    <a name="top"></a>
        <div id="imagebar" class="imagebar-mobile imagebar-text-mobile formobile">
                <a href="https://www.cnblogs.com/cmt/p/18302049" onclick="countCreativeClicks(&#39;M2-博客园-求救信&#39;)" rel="nofollow">
                    <img src="./Windows Socket的UDP和TCP编程介绍 - evilsnake - 博客园_files/35695-20240914121709121-516873353.jpg" alt="" onload="countCreativeImpressionsOnMobile(&#39;M2-博客园-求救信&#39;)">
                    <span id="m2_impression" style="display:none"></span>
                </a>
        </div>
    <div id="top_nav" class="navbar forpc">
        <nav id="nav_main" class="navbar-main">
            <ul id="nav_left" class="navbar-list navbar-left">
                <li class="navbar-branding">
                    <a href="https://www.cnblogs.com/" title="开发者的网上家园" role="banner">
                        <img src="./Windows Socket的UDP和TCP编程介绍 - evilsnake - 博客园_files/logo.svg" alt="博客园Logo">
                    </a>
                </li>
                <li><a href="https://cnblogs.vip/">会员</a></li>
                <li><a href="https://cnblogs.vip/store">周边</a></li>
                    <li><a href="https://cnblogs.vip/donate">捐助</a></li>
                <li>
                    <a href="https://news.cnblogs.com/" onclick="countClicks(&#39;nav&#39;, &#39;skin-navbar-news&#39;)">新闻</a>
                </li>
                <li>
                    <a href="https://q.cnblogs.com/" onclick="countClicks(&#39;nav&#39;, &#39;skin-navbar-q&#39;)">博问</a>
                </li>
                <li>
                    <a href="https://ing.cnblogs.com/" onclick="countClicks(&#39;nav&#39;, &#39;skin-navbar-ing&#39;)">闪存</a>
                </li>
                <li><a href="https://www.cnblogs.com/cmt/p/18341478">赞助商</a></li>
            </ul>
            <ul id="nav_right" class="navbar-list navbar-right">
                <li>
                    <form id="zzk_search" class="navbar-search dropdown" action="https://zzk.cnblogs.com/s" method="get" role="search">
                        <input name="w" id="zzk_search_input" placeholder="代码改变世界" type="search" tabindex="3" autocomplete="off">
                        <button id="zzk_search_button" onclick="window.navbarSearchManager.triggerActiveOption()">
                            <img id="search_icon" class="focus-hidden" src="./Windows Socket的UDP和TCP编程介绍 - evilsnake - 博客园_files/search.svg" alt="搜索">
                            <img class="hidden focus-visible" src="./Windows Socket的UDP和TCP编程介绍 - evilsnake - 博客园_files/enter.svg" alt="搜索">
                        </button>
                        <ul id="navbar_search_options" class="dropdown-menu quick-search-menu">
                            <li tabindex="0" class="active" onclick="zzkSearch(event, document.getElementById(&#39;zzk_search_input&#39;).value)">
                                <div class="keyword-wrapper">
                                    <img src="./Windows Socket的UDP和TCP编程介绍 - evilsnake - 博客园_files/search.svg" alt="搜索">
                                    <div class="keyword"></div>
                                </div>
                                <span class="search-area">所有博客</span>
                            </li>
                                    <li tabindex="1" onclick="zzkBlogSearch(event, &#39;cxq0017&#39;, document.getElementById(&#39;zzk_search_input&#39;).value)">
                                        <div class="keyword-wrapper">
                                            <img src="./Windows Socket的UDP和TCP编程介绍 - evilsnake - 博客园_files/search.svg" alt="搜索">
                                            <div class="keyword"></div>
                                        </div>
                                        <span class="search-area">当前博客</span>
                                    </li>
                        </ul>
                    </form>
                </li>
                <li id="navbar_login_status" class="navbar-list">
                    <a class="navbar-user-info navbar-blog" href="https://i.cnblogs.com/EditPosts.aspx?opt=1" alt="写随笔" title="写随笔" style="display: none;">
                        <img id="new_post_icon" class="navbar-icon" src="./Windows Socket的UDP和TCP编程介绍 - evilsnake - 博客园_files/newpost.svg" alt="写随笔">
                    </a>
                    <a id="navblog-myblog-icon" class="navbar-user-info navbar-blog" href="https://passport.cnblogs.com/GetBlogApplyStatus.aspx" alt="我的博客" title="我的博客" style="display: none;">
                        <img id="myblog_icon" class="navbar-icon" src="./Windows Socket的UDP和TCP编程介绍 - evilsnake - 博客园_files/myblog.svg" alt="我的博客">
                    </a>
                    <a class="navbar-user-info navbar-message navbar-icon-wrapper" href="https://msg.cnblogs.com/" alt="短消息" title="短消息" style="display: none;">
                        <img id="msg_icon" class="navbar-icon" src="./Windows Socket的UDP和TCP编程介绍 - evilsnake - 博客园_files/message.svg" alt="短消息">
                        <span id="msg_count" style="display: none"></span>
                    </a>
                    <a id="navbar_lite_mode_indicator" data-current-page="blog" style="display: none" href="javascript:void(0)" alt="简洁模式" title="简洁模式启用，您在访问他人博客时会使用简洁款皮肤展示">
                        <img class="navbar-icon" src="./Windows Socket的UDP和TCP编程介绍 - evilsnake - 博客园_files/lite-mode-on.svg" alt="简洁模式">
                    </a>
                    <div id="user_info" class="navbar-user-info dropdown" style="display: none;">
                        <a class="dropdown-button" href="https://home.cnblogs.com/">
                            <img id="user_icon" class="navbar-avatar" src="./Windows Socket的UDP和TCP编程介绍 - evilsnake - 博客园_files/avatar-default.svg" alt="用户头像">
                        </a>
                        <div class="dropdown-menu">
                            <a id="navblog-myblog-text" href="https://passport.cnblogs.com/GetBlogApplyStatus.aspx">我的博客</a>
                            <a href="https://home.cnblogs.com/">我的园子</a>
                            <a href="https://account.cnblogs.com/settings/account">账号设置</a>
                            <a href="javascript:void(0)" id="navbar_lite_mode_toggle" title="简洁模式会使用简洁款皮肤显示所有博客">
    简洁模式 <img id="navbar_lite_mode_on" src="./Windows Socket的UDP和TCP编程介绍 - evilsnake - 博客园_files/lite-mode-check.svg" class="hide" style="display: none;"><span id="navbar_lite_mode_spinner" class="hide">...</span>
</a>
                            <a href="javascript:void(0)" onclick="account.logout();">退出登录</a>
                        </div>
                    </div>
                    <a class="navbar-anonymous" href="https://account.cnblogs.com/signup" style="display: inline;">注册</a>
                    <a class="navbar-anonymous" href="javascript:void(0);" onclick="account.login()" style="display: inline;">登录</a>
                </li>
            </ul>
        </nav>
    </div>

    

    <!--done-->
<div id="home">
<div id="header">
	<div id="blogTitle">
        <a id="lnkBlogLogo" href="https://www.cnblogs.com/cxq0017/"><img id="blogLogo" src="./Windows Socket的UDP和TCP编程介绍 - evilsnake - 博客园_files/logo.gif" alt="返回主页"></a>		
		
<!--done-->
<h1><a id="Header1_HeaderTitle" class="headermaintitle HeaderMainTitle" href="https://www.cnblogs.com/cxq0017">evilsnake</a>
</h1>
<h2>愿我来世得菩提时 心若琉璃内外明澈</h2>




		
	</div><!--end: blogTitle 博客的标题和副标题 -->
	<div id="navigator">
		
<ul id="navList">
<li><a id="blog_nav_sitehome" class="menu" href="https://www.cnblogs.com/">
博客园</a>
</li>
<li>
<a id="blog_nav_myhome" class="menu" href="https://www.cnblogs.com/cxq0017/">
首页</a>
</li>
<li>

<a id="blog_nav_newpost" class="menu" href="https://i.cnblogs.com/EditPosts.aspx?opt=1">
新随笔</a>
</li>
<li>
<a id="blog_nav_contact" class="menu" href="https://msg.cnblogs.com/send/evilsnake">
联系</a></li>
<li>
<a id="blog_nav_rss" class="menu" href="javascript:void(0)" data-rss="https://www.cnblogs.com/cxq0017/rss/">
订阅</a>
<!--<partial name="./Shared/_XmlLink.cshtml" model="Model" /></li>--></li>
<li>
<a id="blog_nav_admin" class="menu" href="https://i.cnblogs.com/">
管理</a>
</li>
</ul>


		<div class="blogStats">
			<span id="stats_post_count">随笔 - 66&nbsp; </span>
<span id="stats_article_count">文章 - 0&nbsp; </span>
<span id="stats-comment_count">评论 - 20&nbsp; </span>
<span id="stats-total-view-count">阅读 - 
<span title="总阅读数: 472435">
47万</span></span>

		</div><!--end: blogStats -->
	</div><!--end: navigator 博客导航栏 -->
</div><!--end: header 头部 -->
<div id="main">
	<div id="mainContent">
	<div class="forFlow">
		<div id="post_detail">
    <!--done-->
    <div id="topics">
        <div class="post">
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/cxq0017/p/6497352.html" title="发布于 2017-03-03 16:33">
    <span role="heading" aria-level="2">Windows Socket的UDP和TCP编程介绍</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p><strong>1:网络中进程之间如何通信</strong></p>
<p><strong>　　</strong>为了实现进程之间通信，首要解决的问题是如何唯一标识一个进程，在本地可以通过进程PID来唯一标识一个进程，但是在网络中则是行不通的，其实TCP/IP协议族已经帮我们解决了这个问题，网络层的"ip 地址"可以唯一标识网络中的主机，而"传输层的 协议+端口"可以唯一标识主机中的应用程序（进程）。这样利用(ip地址，谢谢，端口)就可以标识网络中的进程了，网络中的进程通信就可以利用这个标志与其它进程进行交互。而现在几乎所有网络应用程序都是采用socket来通信的，那么什么是socket呢？</p>
<p><strong>2：套接字(socket)</strong></p>
<p>　　socket起源于Unix,而Unix/Linux基本哲学之一就是"一切皆文件"，都可以用"打开Open -&gt; 读写write/read -&gt;关闭close"模式来操作，socket就是该模式的一个实现，socket就是一种特殊的文件，一些socket函数就是对其进行的操作(读/写IO、打开、关闭)，说白了Socket就是应用层与TCP/IP协议族通信的中间软件抽象层，它是一组接口。socket把复杂的TCP/IP协议族隐藏在socket接口后面，对用户来说就是一组简单的接口。让socket去组织数据，以符合指定的协议。</p>
<p>　　随着Unix的应用推广，套接字有被引进了windows等操作系统，套接字通常只与同一区域的套接字交换数据，windows只支持一个通信区域，网际域(AF_INET)，这个域被使用网际协议簇的通信进程。</p>
<p><strong>3：客户机/服务器模式</strong></p>
<p>　　在TCP/IP网络应用中，通信的两个进程间相互作用的主要模式是客户机/服务器模式(client/server),即客户向服务器提出请求，服务器接受到请求后提出相应的服务。</p>
<p>服务器：</p>
<p>　(1):首先服务器先要启动，打开一个通信通道并告知本机，它愿意在某一个地址和端口上接收客户请求。</p>
<p>　(2):等待客户请求到达该端口。</p>
<p>　(3):接收服务请求，处理该客户请求，服务完成后，关闭此进程与客户的通信链路，并终止。</p>
<p>　(4):返回第二步，等待另一个客户请求</p>
<p>　(5):关闭服务器</p>
<p>客户方：</p>
<p>　(1):打开一个通信通道，并连接到服务器所在的主机特定的端口。</p>
<p>　(2):向服务器发送请求，等待并接收应答，继续提出请求。</p>
<p>　(3):请求结束后关闭通信信道并终止</p>
<p><strong>4:基于TCP(面向连接)的socket编程</strong></p>
<p>　　<img src="./Windows Socket的UDP和TCP编程介绍 - evilsnake - 博客园_files/1019006-20170303102450938-370999484.png" alt="" class="medium-zoom-image"></p>
<p>服务器端先初始化Socket,然后与端口绑定(bind),对端口进行监听(listlen),调用accept阻塞，等待客户端连接。在这时如果有个客户端初始化一个Socket，然后连接服务器(connect),如果连接成功，这时客户端与服务器端的连接就建立了，客户端发送数据请求，服务器端接收请求并处理请求，然后把回应数据发送给客户端，客户端读取数据，最后关闭连接，一次交互结束。</p>
<p><strong>5:基于UDP(面向无连接)的socket编程</strong></p>
<p>　　<img src="./Windows Socket的UDP和TCP编程介绍 - evilsnake - 博客园_files/1019006-20170303103250782-1966231336.png" alt="" class="medium-zoom-image"></p>
<p>服务器先创建socket，将socket绑定(bind)一个本地地址和端口上，等待数据传输(recvfrom).这个时候如果有个客户端创建socket，并且向服务器发送数据(sendto)，服务器就建立了连接，实现了数据的通信，连接结束后关闭连接.</p>
<p>6:<strong>UDP例子</strong></p>
<p>&nbsp;　　Server端</p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./Windows Socket的UDP和TCP编程介绍 - evilsnake - 博客园_files/copycode.gif" alt="复制代码"></a></span></div>
<pre><span style="color: rgba(0, 128, 128, 1)"> 1</span> <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">注：需要在stdafx.h 里面添加 #pragma comment(lib, "ws2_32.lib")</span>
<span style="color: rgba(0, 128, 128, 1)"> 2</span> #include<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">stdafx.h</span><span style="color: rgba(128, 0, 0, 1)">"</span>
<span style="color: rgba(0, 128, 128, 1)"> 3</span> #include &lt;winsock2.h&gt;
<span style="color: rgba(0, 128, 128, 1)"> 4</span> #include &lt;ws2tcpip.h&gt;
<span style="color: rgba(0, 128, 128, 1)"> 5</span> #include &lt;stdio.h&gt;
<span style="color: rgba(0, 128, 128, 1)"> 6</span> #include &lt;windows.h&gt;
<span style="color: rgba(0, 128, 128, 1)"> 7</span> <span style="color: rgba(0, 0, 255, 1)">using</span> <span style="color: rgba(0, 0, 255, 1)">namespace</span><span style="color: rgba(0, 0, 0, 1)"> std;  
</span><span style="color: rgba(0, 128, 128, 1)"> 8</span> 
<span style="color: rgba(0, 128, 128, 1)"> 9</span> <span style="color: rgba(0, 0, 255, 1)">#pragma</span> comment(lib, "ws2_32.lib")          <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">add ws2_32.lib  </span>
<span style="color: rgba(0, 128, 128, 1)">10</span> 
<span style="color: rgba(0, 128, 128, 1)">11</span> <span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)"> main()
</span><span style="color: rgba(0, 128, 128, 1)">12</span> <span style="color: rgba(0, 0, 0, 1)">{
</span><span style="color: rgba(0, 128, 128, 1)">13</span> <span style="color: rgba(0, 0, 0, 1)">    WORD wVersionRequested;
</span><span style="color: rgba(0, 128, 128, 1)">14</span> <span style="color: rgba(0, 0, 0, 1)">    WSADATA wsaData;
</span><span style="color: rgba(0, 128, 128, 1)">15</span>     <span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)"> err;
</span><span style="color: rgba(0, 128, 128, 1)">16</span> 
<span style="color: rgba(0, 128, 128, 1)">17</span>     wVersionRequested = MAKEWORD(<span style="color: rgba(128, 0, 128, 1)">2</span>, <span style="color: rgba(128, 0, 128, 1)">2</span><span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 128, 1)">18</span> 
<span style="color: rgba(0, 128, 128, 1)">19</span>     err = WSAStartup(wVersionRequested, &amp;<span style="color: rgba(0, 0, 0, 1)">wsaData);
</span><span style="color: rgba(0, 128, 128, 1)">20</span>     <span style="color: rgba(0, 0, 255, 1)">if</span> (err != <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">) 
</span><span style="color: rgba(0, 128, 128, 1)">21</span> <span style="color: rgba(0, 0, 0, 1)">    {                                 
</span><span style="color: rgba(0, 128, 128, 1)">22</span>         printf(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">WSAStartup failed with error: %d\n</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">, err);
</span><span style="color: rgba(0, 128, 128, 1)">23</span>         <span style="color: rgba(0, 0, 255, 1)">return</span> <span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">;
</span><span style="color: rgba(0, 128, 128, 1)">24</span> <span style="color: rgba(0, 0, 0, 1)">    }
</span><span style="color: rgba(0, 128, 128, 1)">25</span> 
<span style="color: rgba(0, 128, 128, 1)">26</span>     <span style="color: rgba(0, 0, 255, 1)">if</span> (LOBYTE(wsaData.wVersion) != <span style="color: rgba(128, 0, 128, 1)">2</span> || HIBYTE(wsaData.wVersion) != <span style="color: rgba(128, 0, 128, 1)">2</span><span style="color: rgba(0, 0, 0, 1)">) 
</span><span style="color: rgba(0, 128, 128, 1)">27</span> <span style="color: rgba(0, 0, 0, 1)">    {
</span><span style="color: rgba(0, 128, 128, 1)">28</span>         printf(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">Could not find a usable version of Winsock.dll\n</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 128, 1)">29</span> <span style="color: rgba(0, 0, 0, 1)">        WSACleanup();
</span><span style="color: rgba(0, 128, 128, 1)">30</span>         <span style="color: rgba(0, 0, 255, 1)">return</span> <span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">;
</span><span style="color: rgba(0, 128, 128, 1)">31</span> <span style="color: rgba(0, 0, 0, 1)">    }
</span><span style="color: rgba(0, 128, 128, 1)">32</span>     <span style="color: rgba(0, 0, 255, 1)">else</span>
<span style="color: rgba(0, 128, 128, 1)">33</span> <span style="color: rgba(0, 0, 0, 1)">    {
</span><span style="color: rgba(0, 128, 128, 1)">34</span>         printf(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">The Winsock 2.2 dll was found okay\n</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 128, 1)">35</span> <span style="color: rgba(0, 0, 0, 1)">    }
</span><span style="color: rgba(0, 128, 128, 1)">36</span> 
<span style="color: rgba(0, 128, 128, 1)">37</span>     SOCKET sockSrv = socket(AF_INET,SOCK_DGRAM, <span style="color: rgba(128, 0, 128, 1)">0</span>); <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">创建一个socket句柄;</span>
<span style="color: rgba(0, 128, 128, 1)">38</span>     <span style="color: rgba(0, 0, 255, 1)">if</span>( sockSrv ==<span style="color: rgba(0, 0, 0, 1)"> INVALID_SOCKET )
</span><span style="color: rgba(0, 128, 128, 1)">39</span> <span style="color: rgba(0, 0, 0, 1)">    {  
</span><span style="color: rgba(0, 128, 128, 1)">40</span>         printf(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">socket() fail:%d\n</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">,WSAGetLastError());
</span><span style="color: rgba(0, 128, 128, 1)">41</span>         <span style="color: rgba(0, 0, 255, 1)">return</span> -<span style="color: rgba(128, 0, 128, 1)">2</span><span style="color: rgba(0, 0, 0, 1)">;  
</span><span style="color: rgba(0, 128, 128, 1)">42</span> <span style="color: rgba(0, 0, 0, 1)">    } 
</span><span style="color: rgba(0, 128, 128, 1)">43</span> 
<span style="color: rgba(0, 128, 128, 1)">44</span> <span style="color: rgba(0, 0, 0, 1)">    SOCKADDR_IN  addrServ;
</span><span style="color: rgba(0, 128, 128, 1)">45</span>     memset(&amp;addrServ,<span style="color: rgba(128, 0, 128, 1)">0</span>,<span style="color: rgba(0, 0, 255, 1)">sizeof</span><span style="color: rgba(0, 0, 0, 1)">(addrServ));
</span><span style="color: rgba(0, 128, 128, 1)">46</span>     addrServ.sin_addr.S_un.S_addr =<span style="color: rgba(0, 0, 0, 1)"> htonl(INADDR_ANY);
</span><span style="color: rgba(0, 128, 128, 1)">47</span>     addrServ.sin_family =<span style="color: rgba(0, 0, 0, 1)"> AF_INET;
</span><span style="color: rgba(0, 128, 128, 1)">48</span>     addrServ.sin_port = htons(<span style="color: rgba(128, 0, 128, 1)">4999</span>); <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">从"主机字节顺序" 转变为 "网络字节顺序"</span>
<span style="color: rgba(0, 128, 128, 1)">49</span> 
<span style="color: rgba(0, 128, 128, 1)">50</span>     err = bind(sockSrv,(SOCKADDR*)&amp;addrServ,<span style="color: rgba(0, 0, 255, 1)">sizeof</span>(SOCKADDR)); <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">把socket 绑定到指定地址上</span>
<span style="color: rgba(0, 128, 128, 1)">51</span>     <span style="color: rgba(0, 0, 255, 1)">if</span>( err != <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)"> )  
</span><span style="color: rgba(0, 128, 128, 1)">52</span> <span style="color: rgba(0, 0, 0, 1)">    {  
</span><span style="color: rgba(0, 128, 128, 1)">53</span>         printf(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">bind()fail:%d\n</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">,WSAGetLastError());  
</span><span style="color: rgba(0, 128, 128, 1)">54</span>         <span style="color: rgba(0, 0, 255, 1)">return</span> -<span style="color: rgba(128, 0, 128, 1)">3</span><span style="color: rgba(0, 0, 0, 1)">;  
</span><span style="color: rgba(0, 128, 128, 1)">55</span> <span style="color: rgba(0, 0, 0, 1)">    } 
</span><span style="color: rgba(0, 128, 128, 1)">56</span> 
<span style="color: rgba(0, 128, 128, 1)">57</span> <span style="color: rgba(0, 0, 0, 1)">    SOCKADDR_IN  addrClient;
</span><span style="color: rgba(0, 128, 128, 1)">58</span>     memset(&amp;addrClient,<span style="color: rgba(128, 0, 128, 1)">0</span>,<span style="color: rgba(0, 0, 255, 1)">sizeof</span>(addrClient)); <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">在设置每个地址成员之前，整个addr结构应该被初始化0;</span>
<span style="color: rgba(0, 128, 128, 1)">59</span>     <span style="color: rgba(0, 0, 255, 1)">int</span> length = <span style="color: rgba(0, 0, 255, 1)">sizeof</span><span style="color: rgba(0, 0, 0, 1)">(SOCKADDR);
</span><span style="color: rgba(0, 128, 128, 1)">60</span>     <span style="color: rgba(0, 0, 255, 1)">char</span> recvBuf[<span style="color: rgba(128, 0, 128, 1)">100</span><span style="color: rgba(0, 0, 0, 1)">];
</span><span style="color: rgba(0, 128, 128, 1)">61</span>     printf(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">waiting for client connect!!!!\n</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 128, 1)">62</span>     recvfrom(sockSrv,recvBuf,<span style="color: rgba(128, 0, 128, 1)">100</span>,<span style="color: rgba(128, 0, 128, 1)">0</span>,(SOCKADDR*)&amp;addrClient,&amp;<span style="color: rgba(0, 0, 0, 1)">length);
</span><span style="color: rgba(0, 128, 128, 1)">63</span> 
<span style="color: rgba(0, 128, 128, 1)">64</span>     printf(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">recvfrom client:: %s\n</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">,recvBuf);
</span><span style="color: rgba(0, 128, 128, 1)">65</span> 
<span style="color: rgba(0, 128, 128, 1)">66</span> <span style="color: rgba(0, 0, 0, 1)">    closesocket(sockSrv);
</span><span style="color: rgba(0, 128, 128, 1)">67</span> 
<span style="color: rgba(0, 128, 128, 1)">68</span> <span style="color: rgba(0, 0, 0, 1)">    WSACleanup();
</span><span style="color: rgba(0, 128, 128, 1)">69</span> 
<span style="color: rgba(0, 128, 128, 1)">70</span>     system(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">PAUSE</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 128, 1)">71</span>     <span style="color: rgba(0, 0, 255, 1)">return</span> <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">;
</span><span style="color: rgba(0, 128, 128, 1)">72</span> }</pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./Windows Socket的UDP和TCP编程介绍 - evilsnake - 博客园_files/copycode.gif" alt="复制代码"></a></span></div></div>
<p>Client端</p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./Windows Socket的UDP和TCP编程介绍 - evilsnake - 博客园_files/copycode.gif" alt="复制代码"></a></span></div>
<pre><span style="color: rgba(0, 128, 128, 1)"> 1</span> <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> 注：需要在stdafx.h 里面添加 #pragma comment(lib, "ws2_32.lib")
</span><span style="color: rgba(0, 128, 128, 1)"> 2</span> <span style="color: rgba(0, 128, 0, 1)">//
</span><span style="color: rgba(0, 128, 128, 1)"> 3</span> #include<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">stdafx.h</span><span style="color: rgba(128, 0, 0, 1)">"</span>
<span style="color: rgba(0, 128, 128, 1)"> 4</span> #include &lt;winsock2.h&gt;
<span style="color: rgba(0, 128, 128, 1)"> 5</span> #include &lt;ws2tcpip.h&gt;
<span style="color: rgba(0, 128, 128, 1)"> 6</span> #include &lt;stdio.h&gt;
<span style="color: rgba(0, 128, 128, 1)"> 7</span> #include &lt;windows.h&gt;
<span style="color: rgba(0, 128, 128, 1)"> 8</span> <span style="color: rgba(0, 0, 255, 1)">using</span> <span style="color: rgba(0, 0, 255, 1)">namespace</span><span style="color: rgba(0, 0, 0, 1)"> std;  
</span><span style="color: rgba(0, 128, 128, 1)"> 9</span> 
<span style="color: rgba(0, 128, 128, 1)">10</span> <span style="color: rgba(0, 0, 255, 1)">#pragma</span> comment(lib, "ws2_32.lib")          <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">add ws2_32.lib  </span>
<span style="color: rgba(0, 128, 128, 1)">11</span> 
<span style="color: rgba(0, 128, 128, 1)">12</span> <span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)"> main()
</span><span style="color: rgba(0, 128, 128, 1)">13</span> <span style="color: rgba(0, 0, 0, 1)">{
</span><span style="color: rgba(0, 128, 128, 1)">14</span> <span style="color: rgba(0, 0, 0, 1)">    WORD wVersionRequested;
</span><span style="color: rgba(0, 128, 128, 1)">15</span> <span style="color: rgba(0, 0, 0, 1)">    WSADATA wsaData;
</span><span style="color: rgba(0, 128, 128, 1)">16</span>     <span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)"> err;
</span><span style="color: rgba(0, 128, 128, 1)">17</span> 
<span style="color: rgba(0, 128, 128, 1)">18</span>     wVersionRequested = MAKEWORD(<span style="color: rgba(128, 0, 128, 1)">2</span>, <span style="color: rgba(128, 0, 128, 1)">2</span><span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 128, 1)">19</span> 
<span style="color: rgba(0, 128, 128, 1)">20</span>     err = WSAStartup(wVersionRequested, &amp;<span style="color: rgba(0, 0, 0, 1)">wsaData);
</span><span style="color: rgba(0, 128, 128, 1)">21</span>     <span style="color: rgba(0, 0, 255, 1)">if</span> (err != <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">) 
</span><span style="color: rgba(0, 128, 128, 1)">22</span> <span style="color: rgba(0, 0, 0, 1)">    {                                 
</span><span style="color: rgba(0, 128, 128, 1)">23</span>         printf(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">WSAStartup failed with error: %d\n</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">, err);
</span><span style="color: rgba(0, 128, 128, 1)">24</span>         <span style="color: rgba(0, 0, 255, 1)">return</span> <span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">;
</span><span style="color: rgba(0, 128, 128, 1)">25</span> <span style="color: rgba(0, 0, 0, 1)">    }
</span><span style="color: rgba(0, 128, 128, 1)">26</span> 
<span style="color: rgba(0, 128, 128, 1)">27</span>     <span style="color: rgba(0, 0, 255, 1)">if</span> (LOBYTE(wsaData.wVersion) != <span style="color: rgba(128, 0, 128, 1)">2</span> || HIBYTE(wsaData.wVersion) != <span style="color: rgba(128, 0, 128, 1)">2</span><span style="color: rgba(0, 0, 0, 1)">) 
</span><span style="color: rgba(0, 128, 128, 1)">28</span> <span style="color: rgba(0, 0, 0, 1)">    {
</span><span style="color: rgba(0, 128, 128, 1)">29</span>         printf(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">Could not find a usable version of Winsock.dll\n</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 128, 1)">30</span> <span style="color: rgba(0, 0, 0, 1)">        WSACleanup();
</span><span style="color: rgba(0, 128, 128, 1)">31</span>         <span style="color: rgba(0, 0, 255, 1)">return</span> <span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">;
</span><span style="color: rgba(0, 128, 128, 1)">32</span> <span style="color: rgba(0, 0, 0, 1)">    }
</span><span style="color: rgba(0, 128, 128, 1)">33</span>     <span style="color: rgba(0, 0, 255, 1)">else</span>
<span style="color: rgba(0, 128, 128, 1)">34</span> <span style="color: rgba(0, 0, 0, 1)">    {
</span><span style="color: rgba(0, 128, 128, 1)">35</span>         printf(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">The Winsock 2.2 dll was found okay\n</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 128, 1)">36</span> <span style="color: rgba(0, 0, 0, 1)">    }
</span><span style="color: rgba(0, 128, 128, 1)">37</span> 
<span style="color: rgba(0, 128, 128, 1)">38</span> 
<span style="color: rgba(0, 128, 128, 1)">39</span>     SOCKET sockClient = socket(AF_INET,SOCK_DGRAM, <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 128, 1)">40</span> 
<span style="color: rgba(0, 128, 128, 1)">41</span> <span style="color: rgba(0, 0, 0, 1)">    SOCKADDR_IN  addrServ;
</span><span style="color: rgba(0, 128, 128, 1)">42</span>     memset(&amp;addrServ,<span style="color: rgba(128, 0, 128, 1)">0</span>,<span style="color: rgba(0, 0, 255, 1)">sizeof</span><span style="color: rgba(0, 0, 0, 1)">(addrServ));
</span><span style="color: rgba(0, 128, 128, 1)">43</span>     addrServ.sin_addr.S_un.S_addr = inet_addr(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">127.0.0.1</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 128, 1)">44</span>     addrServ.sin_family =<span style="color: rgba(0, 0, 0, 1)"> AF_INET;
</span><span style="color: rgba(0, 128, 128, 1)">45</span>     addrServ.sin_port = htons(<span style="color: rgba(128, 0, 128, 1)">4999</span><span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 128, 1)">46</span>     printf(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">begin to send data to server::Hello\n</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 128, 1)">47</span>     sendto(sockClient,<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">Hello\n</span><span style="color: rgba(128, 0, 0, 1)">"</span>,strlen(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">Hello\n</span><span style="color: rgba(128, 0, 0, 1)">"</span>)+<span style="color: rgba(128, 0, 128, 1)">1</span>,<span style="color: rgba(128, 0, 128, 1)">0</span>,(SOCKADDR*)&amp;addrServ,<span style="color: rgba(0, 0, 255, 1)">sizeof</span><span style="color: rgba(0, 0, 0, 1)">(SOCKADDR));
</span><span style="color: rgba(0, 128, 128, 1)">48</span> 
<span style="color: rgba(0, 128, 128, 1)">49</span> <span style="color: rgba(0, 0, 0, 1)">    closesocket(sockClient);
</span><span style="color: rgba(0, 128, 128, 1)">50</span> 
<span style="color: rgba(0, 128, 128, 1)">51</span>     system(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">PAUSE</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 128, 1)">52</span> <span style="color: rgba(0, 0, 0, 1)">    WSACleanup();
</span><span style="color: rgba(0, 128, 128, 1)">53</span> 
<span style="color: rgba(0, 128, 128, 1)">54</span>     <span style="color: rgba(0, 0, 255, 1)">return</span> <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">;
</span><span style="color: rgba(0, 128, 128, 1)">55</span> }</pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./Windows Socket的UDP和TCP编程介绍 - evilsnake - 博客园_files/copycode.gif" alt="复制代码"></a></span></div></div>
<p>输出的结果为:<br><img src="./Windows Socket的UDP和TCP编程介绍 - evilsnake - 博客园_files/1019006-20170303161858720-609510083.png" alt="" class="medium-zoom-image"></p>
<p><strong>&nbsp;7:TCP例子</strong></p>
<p>&nbsp;Server端</p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./Windows Socket的UDP和TCP编程介绍 - evilsnake - 博客园_files/copycode.gif" alt="复制代码"></a></span></div>
<pre><span style="color: rgba(0, 128, 128, 1)"> 1</span> #include<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">stdafx.h</span><span style="color: rgba(128, 0, 0, 1)">"</span>
<span style="color: rgba(0, 128, 128, 1)"> 2</span> #include &lt;winsock2.h&gt;  
<span style="color: rgba(0, 128, 128, 1)"> 3</span> #include &lt;iostream&gt;  
<span style="color: rgba(0, 128, 128, 1)"> 4</span> 
<span style="color: rgba(0, 128, 128, 1)"> 5</span> #include &lt;<span style="color: rgba(0, 0, 255, 1)">string</span>.h&gt;  
<span style="color: rgba(0, 128, 128, 1)"> 6</span> <span style="color: rgba(0, 0, 255, 1)">using</span> <span style="color: rgba(0, 0, 255, 1)">namespace</span><span style="color: rgba(0, 0, 0, 1)"> std;  
</span><span style="color: rgba(0, 128, 128, 1)"> 7</span> 
<span style="color: rgba(0, 128, 128, 1)"> 8</span> <span style="color: rgba(0, 0, 255, 1)">#pragma</span> comment(lib, "ws2_32.lib")          <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">add ws2_32.lib  </span>
<span style="color: rgba(0, 128, 128, 1)"> 9</span> 
<span style="color: rgba(0, 128, 128, 1)">10</span> 
<span style="color: rgba(0, 128, 128, 1)">11</span> <span style="color: rgba(0, 0, 255, 1)">const</span> <span style="color: rgba(0, 0, 255, 1)">int</span> DEFAULT_PORT = <span style="color: rgba(128, 0, 128, 1)">8000</span><span style="color: rgba(0, 0, 0, 1)">;  
</span><span style="color: rgba(0, 128, 128, 1)">12</span> <span style="color: rgba(0, 0, 255, 1)">int</span> main(<span style="color: rgba(0, 0, 255, 1)">int</span> argc,<span style="color: rgba(0, 0, 255, 1)">char</span>*<span style="color: rgba(0, 0, 0, 1)"> argv[])  
</span><span style="color: rgba(0, 128, 128, 1)">13</span> <span style="color: rgba(0, 0, 0, 1)">{  
</span><span style="color: rgba(0, 128, 128, 1)">14</span> 
<span style="color: rgba(0, 128, 128, 1)">15</span> <span style="color: rgba(0, 0, 0, 1)">    WORD    wVersionRequested;  
</span><span style="color: rgba(0, 128, 128, 1)">16</span> <span style="color: rgba(0, 0, 0, 1)">    WSADATA wsaData;  
</span><span style="color: rgba(0, 128, 128, 1)">17</span>     <span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)">     err,iLen;  
</span><span style="color: rgba(0, 128, 128, 1)">18</span>     wVersionRequested   =   MAKEWORD(<span style="color: rgba(128, 0, 128, 1)">2</span>,<span style="color: rgba(128, 0, 128, 1)">2</span><span style="color: rgba(0, 0, 0, 1)">);  
</span><span style="color: rgba(0, 128, 128, 1)">19</span> 
<span style="color: rgba(0, 128, 128, 1)">20</span>     err =  WSAStartup(wVersionRequested,&amp;<span style="color: rgba(0, 0, 0, 1)">wsaData); 
</span><span style="color: rgba(0, 128, 128, 1)">21</span>     <span style="color: rgba(0, 0, 255, 1)">if</span>( err!=<span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)"> )  
</span><span style="color: rgba(0, 128, 128, 1)">22</span> <span style="color: rgba(0, 0, 0, 1)">    {  
</span><span style="color: rgba(0, 128, 128, 1)">23</span>         printf(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">WSAStartup failed with error: %d\n</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">, err); 
</span><span style="color: rgba(0, 128, 128, 1)">24</span>         <span style="color: rgba(0, 0, 255, 1)">return</span> -<span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">;  
</span><span style="color: rgba(0, 128, 128, 1)">25</span> <span style="color: rgba(0, 0, 0, 1)">    }  
</span><span style="color: rgba(0, 128, 128, 1)">26</span>     <span style="color: rgba(0, 0, 255, 1)">if</span> ( LOBYTE(wsaData.wVersion) != <span style="color: rgba(128, 0, 128, 1)">2</span> || HIBYTE(wsaData.wVersion) != <span style="color: rgba(128, 0, 128, 1)">2</span><span style="color: rgba(0, 0, 0, 1)"> ) 
</span><span style="color: rgba(0, 128, 128, 1)">27</span> <span style="color: rgba(0, 0, 0, 1)">    {
</span><span style="color: rgba(0, 128, 128, 1)">28</span>         printf(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">Could not find a usable version of Winsock.dll\n</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 128, 1)">29</span> <span style="color: rgba(0, 0, 0, 1)">        WSACleanup();
</span><span style="color: rgba(0, 128, 128, 1)">30</span>         <span style="color: rgba(0, 0, 255, 1)">return</span> <span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">;
</span><span style="color: rgba(0, 128, 128, 1)">31</span> <span style="color: rgba(0, 0, 0, 1)">    }
</span><span style="color: rgba(0, 128, 128, 1)">32</span>     <span style="color: rgba(0, 0, 255, 1)">else</span>
<span style="color: rgba(0, 128, 128, 1)">33</span> <span style="color: rgba(0, 0, 0, 1)">    {
</span><span style="color: rgba(0, 128, 128, 1)">34</span>         printf(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">The Winsock 2.2 dll was found okay\n</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 128, 1)">35</span> <span style="color: rgba(0, 0, 0, 1)">    }
</span><span style="color: rgba(0, 128, 128, 1)">36</span> 
<span style="color: rgba(0, 128, 128, 1)">37</span>     SOCKET sockSrv = socket(AF_INET,SOCK_STREAM,<span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">);  
</span><span style="color: rgba(0, 128, 128, 1)">38</span>     <span style="color: rgba(0, 0, 255, 1)">if</span>( sockSrv ==<span style="color: rgba(0, 0, 0, 1)"> INVALID_SOCKET )
</span><span style="color: rgba(0, 128, 128, 1)">39</span> <span style="color: rgba(0, 0, 0, 1)">    {  
</span><span style="color: rgba(0, 128, 128, 1)">40</span>         printf(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">socket() fail:%d\n</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">,WSAGetLastError());
</span><span style="color: rgba(0, 128, 128, 1)">41</span>         <span style="color: rgba(0, 0, 255, 1)">return</span> -<span style="color: rgba(128, 0, 128, 1)">2</span><span style="color: rgba(0, 0, 0, 1)">;  
</span><span style="color: rgba(0, 128, 128, 1)">42</span> <span style="color: rgba(0, 0, 0, 1)">    }  
</span><span style="color: rgba(0, 128, 128, 1)">43</span> 
<span style="color: rgba(0, 128, 128, 1)">44</span> <span style="color: rgba(0, 0, 0, 1)">    SOCKADDR_IN addrSrv;  
</span><span style="color: rgba(0, 128, 128, 1)">45</span>     memset(&amp;addrSrv,<span style="color: rgba(128, 0, 128, 1)">0</span>,<span style="color: rgba(0, 0, 255, 1)">sizeof</span><span style="color: rgba(0, 0, 0, 1)">(addrSrv));
</span><span style="color: rgba(0, 128, 128, 1)">46</span>     addrSrv.sin_family =<span style="color: rgba(0, 0, 0, 1)"> AF_INET;  
</span><span style="color: rgba(0, 128, 128, 1)">47</span>     addrSrv.sin_addr.s_addr =<span style="color: rgba(0, 0, 0, 1)"> htonl(INADDR_ANY);  
</span><span style="color: rgba(0, 128, 128, 1)">48</span>     addrSrv.sin_port =<span style="color: rgba(0, 0, 0, 1)"> htons(DEFAULT_PORT);  
</span><span style="color: rgba(0, 128, 128, 1)">49</span> 
<span style="color: rgba(0, 128, 128, 1)">50</span>     err = bind(sockSrv,(SOCKADDR*)&amp;addrSrv,<span style="color: rgba(0, 0, 255, 1)">sizeof</span><span style="color: rgba(0, 0, 0, 1)">(SOCKADDR));  
</span><span style="color: rgba(0, 128, 128, 1)">51</span>     <span style="color: rgba(0, 0, 255, 1)">if</span>( err != <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)"> )  
</span><span style="color: rgba(0, 128, 128, 1)">52</span> <span style="color: rgba(0, 0, 0, 1)">    {  
</span><span style="color: rgba(0, 128, 128, 1)">53</span>         printf(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">bind()fail:%d\n</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">,WSAGetLastError());  
</span><span style="color: rgba(0, 128, 128, 1)">54</span>         <span style="color: rgba(0, 0, 255, 1)">return</span> -<span style="color: rgba(128, 0, 128, 1)">3</span><span style="color: rgba(0, 0, 0, 1)">;  
</span><span style="color: rgba(0, 128, 128, 1)">55</span> <span style="color: rgba(0, 0, 0, 1)">    }  
</span><span style="color: rgba(0, 128, 128, 1)">56</span> 
<span style="color: rgba(0, 128, 128, 1)">57</span>     err = listen( sockSrv,<span style="color: rgba(128, 0, 128, 1)">5</span> );<span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">listen函数的第一个参数即为要监听的socket描述字，第二个参数为相应socket可以排队的最大连接个数</span>
<span style="color: rgba(0, 128, 128, 1)">58</span>     <span style="color: rgba(0, 0, 255, 1)">if</span>( err != <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)"> )  
</span><span style="color: rgba(0, 128, 128, 1)">59</span> <span style="color: rgba(0, 0, 0, 1)">    {  
</span><span style="color: rgba(0, 128, 128, 1)">60</span>         printf(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">listen()fail:%d\n</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">,WSAGetLastError());
</span><span style="color: rgba(0, 128, 128, 1)">61</span>         <span style="color: rgba(0, 0, 255, 1)">return</span> -<span style="color: rgba(128, 0, 128, 1)">4</span><span style="color: rgba(0, 0, 0, 1)">;  
</span><span style="color: rgba(0, 128, 128, 1)">62</span> <span style="color: rgba(0, 0, 0, 1)">    } 
</span><span style="color: rgba(0, 128, 128, 1)">63</span>     printf(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">Server waitting...!!!!!\n</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);  
</span><span style="color: rgba(0, 128, 128, 1)">64</span> <span style="color: rgba(0, 0, 0, 1)">    SOCKADDR_IN addrClt;  
</span><span style="color: rgba(0, 128, 128, 1)">65</span>     <span style="color: rgba(0, 0, 255, 1)">int</span> len = <span style="color: rgba(0, 0, 255, 1)">sizeof</span><span style="color: rgba(0, 0, 0, 1)">(SOCKADDR);  
</span><span style="color: rgba(0, 128, 128, 1)">66</span>     memset(&amp;addrClt,<span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">,len);
</span><span style="color: rgba(0, 128, 128, 1)">67</span> 
<span style="color: rgba(0, 128, 128, 1)">68</span>     <span style="color: rgba(0, 0, 255, 1)">while</span>(<span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">)  
</span><span style="color: rgba(0, 128, 128, 1)">69</span> <span style="color: rgba(0, 0, 0, 1)">    {  
</span><span style="color: rgba(0, 128, 128, 1)">70</span>         SOCKET sockConn = accept(sockSrv,(SOCKADDR*)&amp;addrClt,&amp;<span style="color: rgba(0, 0, 0, 1)">len);  
</span><span style="color: rgba(0, 128, 128, 1)">71</span>         <span style="color: rgba(0, 0, 255, 1)">char</span> sendBuf[<span style="color: rgba(128, 0, 128, 1)">1024</span>],hostname[<span style="color: rgba(128, 0, 128, 1)">100</span><span style="color: rgba(0, 0, 0, 1)">];  
</span><span style="color: rgba(0, 128, 128, 1)">72</span>         <span style="color: rgba(0, 0, 255, 1)">if</span>( gethostname(hostname,<span style="color: rgba(128, 0, 128, 1)">100</span>) != <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)"> ) 
</span><span style="color: rgba(0, 128, 128, 1)">73</span> <span style="color: rgba(0, 0, 0, 1)">        {
</span><span style="color: rgba(0, 128, 128, 1)">74</span>             strcpy_s(hostname,strlen(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">None</span><span style="color: rgba(128, 0, 0, 1)">"</span>)+<span style="color: rgba(128, 0, 128, 1)">1</span>,<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">None</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);  
</span><span style="color: rgba(0, 128, 128, 1)">75</span> <span style="color: rgba(0, 0, 0, 1)">        }
</span><span style="color: rgba(0, 128, 128, 1)">76</span>         sprintf_s(sendBuf,<span style="color: rgba(0, 0, 255, 1)">sizeof</span>(sendBuf),<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">Welecome %s connected to %s!</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">,inet_ntoa(addrClt.sin_addr),hostname);  
</span><span style="color: rgba(0, 128, 128, 1)">77</span> 
<span style="color: rgba(0, 128, 128, 1)">78</span>         err = send(sockConn,sendBuf,strlen(sendBuf)+<span style="color: rgba(128, 0, 128, 1)">1</span>,<span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">);  
</span><span style="color: rgba(0, 128, 128, 1)">79</span> 
<span style="color: rgba(0, 128, 128, 1)">80</span>         <span style="color: rgba(0, 0, 255, 1)">char</span> recvBuf[<span style="color: rgba(128, 0, 128, 1)">1024</span>]=<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">\0</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">;  
</span><span style="color: rgba(0, 128, 128, 1)">81</span>         iLen = recv(sockConn,recvBuf,<span style="color: rgba(128, 0, 128, 1)">1024</span>,<span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">);  
</span><span style="color: rgba(0, 128, 128, 1)">82</span> 
<span style="color: rgba(0, 128, 128, 1)">83</span>         recvBuf[iLen]=<span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(128, 0, 0, 1)">\0</span><span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(0, 0, 0, 1)">; 
</span><span style="color: rgba(0, 128, 128, 1)">84</span> <span style="color: rgba(0, 0, 0, 1)">        printf(recvBuf);
</span><span style="color: rgba(0, 128, 128, 1)">85</span> 
<span style="color: rgba(0, 128, 128, 1)">86</span> <span style="color: rgba(0, 0, 0, 1)">        closesocket(sockConn);  
</span><span style="color: rgba(0, 128, 128, 1)">87</span> <span style="color: rgba(0, 0, 0, 1)">    }  
</span><span style="color: rgba(0, 128, 128, 1)">88</span> 
<span style="color: rgba(0, 128, 128, 1)">89</span> <span style="color: rgba(0, 0, 0, 1)">    closesocket(sockSrv);  
</span><span style="color: rgba(0, 128, 128, 1)">90</span> 
<span style="color: rgba(0, 128, 128, 1)">91</span> <span style="color: rgba(0, 0, 0, 1)">    WSACleanup();  
</span><span style="color: rgba(0, 128, 128, 1)">92</span>     <span style="color: rgba(0, 0, 255, 1)">return</span> <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">;  
</span><span style="color: rgba(0, 128, 128, 1)">93</span> }  </pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./Windows Socket的UDP和TCP编程介绍 - evilsnake - 博客园_files/copycode.gif" alt="复制代码"></a></span></div></div>
<p>Client端</p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./Windows Socket的UDP和TCP编程介绍 - evilsnake - 博客园_files/copycode.gif" alt="复制代码"></a></span></div>
<pre><span style="color: rgba(0, 128, 128, 1)"> 1</span> <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> client.cpp : 定义控制台应用程序的入口点。
</span><span style="color: rgba(0, 128, 128, 1)"> 2</span> <span style="color: rgba(0, 128, 0, 1)">//
</span><span style="color: rgba(0, 128, 128, 1)"> 3</span> #include<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">stdafx.h</span><span style="color: rgba(128, 0, 0, 1)">"</span>
<span style="color: rgba(0, 128, 128, 1)"> 4</span> #include &lt;winsock2.h&gt;  
<span style="color: rgba(0, 128, 128, 1)"> 5</span> #include &lt;iostream&gt;  
<span style="color: rgba(0, 128, 128, 1)"> 6</span> 
<span style="color: rgba(0, 128, 128, 1)"> 7</span> #include &lt;<span style="color: rgba(0, 0, 255, 1)">string</span>.h&gt;  
<span style="color: rgba(0, 128, 128, 1)"> 8</span> <span style="color: rgba(0, 0, 255, 1)">using</span> <span style="color: rgba(0, 0, 255, 1)">namespace</span><span style="color: rgba(0, 0, 0, 1)"> std;  
</span><span style="color: rgba(0, 128, 128, 1)"> 9</span> 
<span style="color: rgba(0, 128, 128, 1)">10</span> <span style="color: rgba(0, 0, 255, 1)">#pragma</span> comment(lib, "ws2_32.lib")          
<span style="color: rgba(0, 128, 128, 1)">11</span> 
<span style="color: rgba(0, 128, 128, 1)">12</span> 
<span style="color: rgba(0, 128, 128, 1)">13</span> <span style="color: rgba(0, 0, 255, 1)">const</span> <span style="color: rgba(0, 0, 255, 1)">int</span> DEFAULT_PORT = <span style="color: rgba(128, 0, 128, 1)">8000</span><span style="color: rgba(0, 0, 0, 1)">;  
</span><span style="color: rgba(0, 128, 128, 1)">14</span> <span style="color: rgba(0, 0, 255, 1)">int</span> main(<span style="color: rgba(0, 0, 255, 1)">int</span> argc,<span style="color: rgba(0, 0, 255, 1)">char</span>*<span style="color: rgba(0, 0, 0, 1)"> argv[])  
</span><span style="color: rgba(0, 128, 128, 1)">15</span> <span style="color: rgba(0, 0, 0, 1)">{  
</span><span style="color: rgba(0, 128, 128, 1)">16</span> 
<span style="color: rgba(0, 128, 128, 1)">17</span> <span style="color: rgba(0, 0, 0, 1)">    WORD    wVersionRequested;  
</span><span style="color: rgba(0, 128, 128, 1)">18</span> <span style="color: rgba(0, 0, 0, 1)">    WSADATA wsaData;  
</span><span style="color: rgba(0, 128, 128, 1)">19</span>     <span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)">     err,iLen;  
</span><span style="color: rgba(0, 128, 128, 1)">20</span>     wVersionRequested   =   MAKEWORD(<span style="color: rgba(128, 0, 128, 1)">2</span>,<span style="color: rgba(128, 0, 128, 1)">2</span><span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 128, 1)">21</span> 
<span style="color: rgba(0, 128, 128, 1)">22</span>     err =   WSAStartup(wVersionRequested,&amp;wsaData); <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">load win socket  </span>
<span style="color: rgba(0, 128, 128, 1)">23</span>     <span style="color: rgba(0, 0, 255, 1)">if</span>( err != <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)"> )  
</span><span style="color: rgba(0, 128, 128, 1)">24</span> <span style="color: rgba(0, 0, 0, 1)">    {  
</span><span style="color: rgba(0, 128, 128, 1)">25</span>         printf(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">WSAStartup failed with error: %d\n</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">, err);
</span><span style="color: rgba(0, 128, 128, 1)">26</span>         <span style="color: rgba(0, 0, 255, 1)">return</span> -<span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">;  
</span><span style="color: rgba(0, 128, 128, 1)">27</span> <span style="color: rgba(0, 0, 0, 1)">    }  
</span><span style="color: rgba(0, 128, 128, 1)">28</span> 
<span style="color: rgba(0, 128, 128, 1)">29</span>     SOCKET sockClt = socket(AF_INET,SOCK_STREAM,<span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">);  
</span><span style="color: rgba(0, 128, 128, 1)">30</span>     <span style="color: rgba(0, 0, 255, 1)">if</span>( sockClt ==<span style="color: rgba(0, 0, 0, 1)"> INVALID_SOCKET )
</span><span style="color: rgba(0, 128, 128, 1)">31</span> <span style="color: rgba(0, 0, 0, 1)">    {  
</span><span style="color: rgba(0, 128, 128, 1)">32</span>         printf(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">socket() fail:%d\n</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">,WSAGetLastError());
</span><span style="color: rgba(0, 128, 128, 1)">33</span>         <span style="color: rgba(0, 0, 255, 1)">return</span> -<span style="color: rgba(128, 0, 128, 1)">2</span><span style="color: rgba(0, 0, 0, 1)">;  
</span><span style="color: rgba(0, 128, 128, 1)">34</span> <span style="color: rgba(0, 0, 0, 1)">    }  
</span><span style="color: rgba(0, 128, 128, 1)">35</span> 
<span style="color: rgba(0, 128, 128, 1)">36</span> <span style="color: rgba(0, 0, 0, 1)">    SOCKADDR_IN addrSrv;  
</span><span style="color: rgba(0, 128, 128, 1)">37</span>     memset(&amp;addrSrv,<span style="color: rgba(128, 0, 128, 1)">0</span>,<span style="color: rgba(0, 0, 255, 1)">sizeof</span><span style="color: rgba(0, 0, 0, 1)">(addrSrv));
</span><span style="color: rgba(0, 128, 128, 1)">38</span>     addrSrv.sin_family =<span style="color: rgba(0, 0, 0, 1)"> AF_INET;  
</span><span style="color: rgba(0, 128, 128, 1)">39</span>     addrSrv.sin_addr.s_addr = inet_addr(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">127.0.0.1</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);  
</span><span style="color: rgba(0, 128, 128, 1)">40</span>     addrSrv.sin_port =<span style="color: rgba(0, 0, 0, 1)"> htons(DEFAULT_PORT);  
</span><span style="color: rgba(0, 128, 128, 1)">41</span> 
<span style="color: rgba(0, 128, 128, 1)">42</span>     err = connect(sockClt,(SOCKADDR*)&amp;addrSrv,<span style="color: rgba(0, 0, 255, 1)">sizeof</span><span style="color: rgba(0, 0, 0, 1)">(SOCKADDR));  
</span><span style="color: rgba(0, 128, 128, 1)">43</span> 
<span style="color: rgba(0, 128, 128, 1)">44</span>     <span style="color: rgba(0, 0, 255, 1)">if</span>(err ==<span style="color: rgba(0, 0, 0, 1)">INVALID_SOCKET)  
</span><span style="color: rgba(0, 128, 128, 1)">45</span> <span style="color: rgba(0, 0, 0, 1)">    {  
</span><span style="color: rgba(0, 128, 128, 1)">46</span>         printf(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">connect()fail:%d\n</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">,WSAGetLastError());   
</span><span style="color: rgba(0, 128, 128, 1)">47</span>         <span style="color: rgba(0, 0, 255, 1)">return</span> -<span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">;  
</span><span style="color: rgba(0, 128, 128, 1)">48</span> <span style="color: rgba(0, 0, 0, 1)">    }  
</span><span style="color: rgba(0, 128, 128, 1)">49</span> 
<span style="color: rgba(0, 128, 128, 1)">50</span>     <span style="color: rgba(0, 0, 255, 1)">char</span> sendBuf[<span style="color: rgba(128, 0, 128, 1)">1024</span>],hostname[<span style="color: rgba(128, 0, 128, 1)">100</span><span style="color: rgba(0, 0, 0, 1)">];  
</span><span style="color: rgba(0, 128, 128, 1)">51</span>     <span style="color: rgba(0, 0, 255, 1)">if</span>( gethostname(hostname,<span style="color: rgba(128, 0, 128, 1)">100</span>) != <span style="color: rgba(128, 0, 128, 1)">0</span> ) <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">如果没有错误的时候gethostname会返回0;</span>
<span style="color: rgba(0, 128, 128, 1)">52</span> <span style="color: rgba(0, 0, 0, 1)">    {
</span><span style="color: rgba(0, 128, 128, 1)">53</span>         strcpy_s(hostname,strlen(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">None</span><span style="color: rgba(128, 0, 0, 1)">"</span>)+<span style="color: rgba(128, 0, 128, 1)">1</span>,<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">None</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);  
</span><span style="color: rgba(0, 128, 128, 1)">54</span> <span style="color: rgba(0, 0, 0, 1)">    }
</span><span style="color: rgba(0, 128, 128, 1)">55</span>     strcpy_s(sendBuf,strlen(hostname)+<span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">,hostname);  
</span><span style="color: rgba(0, 128, 128, 1)">56</span>     strcat_s(sendBuf,<span style="color: rgba(0, 0, 255, 1)">sizeof</span>(sendBuf),<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)"> have connected to you!</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);  
</span><span style="color: rgba(0, 128, 128, 1)">57</span>     err = send(sockClt,sendBuf,strlen(sendBuf)+<span style="color: rgba(128, 0, 128, 1)">1</span>,<span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">);  
</span><span style="color: rgba(0, 128, 128, 1)">58</span> 
<span style="color: rgba(0, 128, 128, 1)">59</span>     <span style="color: rgba(0, 0, 255, 1)">char</span> recvBuf[<span style="color: rgba(128, 0, 128, 1)">1024</span>]=<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">\0</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">;  
</span><span style="color: rgba(0, 128, 128, 1)">60</span>     iLen = recv(sockClt,recvBuf,<span style="color: rgba(128, 0, 128, 1)">1024</span>,<span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">);  
</span><span style="color: rgba(0, 128, 128, 1)">61</span> 
<span style="color: rgba(0, 128, 128, 1)">62</span>     <span style="color: rgba(0, 0, 255, 1)">if</span>( iLen == <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)"> )  
</span><span style="color: rgba(0, 128, 128, 1)">63</span> <span style="color: rgba(0, 0, 0, 1)">    {
</span><span style="color: rgba(0, 128, 128, 1)">64</span>         <span style="color: rgba(0, 0, 255, 1)">return</span> -<span style="color: rgba(128, 0, 128, 1)">3</span><span style="color: rgba(0, 0, 0, 1)">; 
</span><span style="color: rgba(0, 128, 128, 1)">65</span> <span style="color: rgba(0, 0, 0, 1)">    }
</span><span style="color: rgba(0, 128, 128, 1)">66</span>     <span style="color: rgba(0, 0, 255, 1)">else</span> <span style="color: rgba(0, 0, 255, 1)">if</span>( iLen ==<span style="color: rgba(0, 0, 0, 1)"> SOCKET_ERROR )
</span><span style="color: rgba(0, 128, 128, 1)">67</span> <span style="color: rgba(0, 0, 0, 1)">    {  
</span><span style="color: rgba(0, 128, 128, 1)">68</span>         printf(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">recv() fail:%d\n</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">,WSAGetLastError()); 
</span><span style="color: rgba(0, 128, 128, 1)">69</span>         <span style="color: rgba(0, 0, 255, 1)">return</span> -<span style="color: rgba(128, 0, 128, 1)">4</span><span style="color: rgba(0, 0, 0, 1)">;  
</span><span style="color: rgba(0, 128, 128, 1)">70</span> <span style="color: rgba(0, 0, 0, 1)">    }  
</span><span style="color: rgba(0, 128, 128, 1)">71</span>     <span style="color: rgba(0, 0, 255, 1)">else</span>  
<span style="color: rgba(0, 128, 128, 1)">72</span> <span style="color: rgba(0, 0, 0, 1)">    {  
</span><span style="color: rgba(0, 128, 128, 1)">73</span>         recvBuf[iLen] = <span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(128, 0, 0, 1)">\0</span><span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(0, 0, 0, 1)">;  
</span><span style="color: rgba(0, 128, 128, 1)">74</span> <span style="color: rgba(0, 0, 0, 1)">        printf(recvBuf);  
</span><span style="color: rgba(0, 128, 128, 1)">75</span>         printf(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">\n</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 128, 1)">76</span> <span style="color: rgba(0, 0, 0, 1)">    }  
</span><span style="color: rgba(0, 128, 128, 1)">77</span> <span style="color: rgba(0, 0, 0, 1)">    closesocket(sockClt);  
</span><span style="color: rgba(0, 128, 128, 1)">78</span> 
<span style="color: rgba(0, 128, 128, 1)">79</span> <span style="color: rgba(0, 0, 0, 1)">    WSACleanup();  
</span><span style="color: rgba(0, 128, 128, 1)">80</span>     system(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">PAUSE</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);  
</span><span style="color: rgba(0, 128, 128, 1)">81</span>     <span style="color: rgba(0, 0, 255, 1)">return</span> <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">;  
</span><span style="color: rgba(0, 128, 128, 1)">82</span> }  </pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./Windows Socket的UDP和TCP编程介绍 - evilsnake - 博客园_files/copycode.gif" alt="复制代码"></a></span></div></div>
<p>输出的结果为<br><img src="./Windows Socket的UDP和TCP编程介绍 - evilsnake - 博客园_files/1019006-20170303163130407-85713379.png" alt="" class="medium-zoom-image"></p>
<p>&nbsp;</p>
</div>
<div class="clear"></div>
<div id="blog_post_info_block" role="contentinfo">


<div id="BlogPostCategory">
    分类: 
            <a href="https://www.cnblogs.com/cxq0017/category/876208.html" target="_blank">c++</a>
</div>

    <div id="blog_post_info">
<div id="green_channel">
        <a href="javascript:void(0);" id="green_channel_digg" onclick="DiggIt(6497352,cb_blogId,1);green_channel_success(this,&#39;谢谢推荐！&#39;);">好文要顶</a>
        <a id="green_channel_follow" onclick="follow(&#39;20a336ef-fc6f-e611-9fc1-ac853d9f53cc&#39;);" href="javascript:void(0);">关注我</a>
    <a id="green_channel_favorite" onclick="AddToWz(cb_entryId);return false;" href="javascript:void(0);">收藏该文</a>
    <a id="green_channel_wechat" href="javascript:void(0);" onclick="shareManager.wechatShare()">微信分享</a>
</div>
<div id="author_profile">
    <div id="author_profile_info" class="author_profile_info">
            <a href="https://home.cnblogs.com/u/cxq0017/" target="_blank"><img src="./Windows Socket的UDP和TCP编程介绍 - evilsnake - 博客园_files/20170122151147.png" class="author_avatar" alt=""></a>
        <div id="author_profile_detail" class="author_profile_info">
            <a href="https://home.cnblogs.com/u/cxq0017/">evilsnake</a>
            <br>
            <a href="https://home.cnblogs.com/u/cxq0017/followers/">粉丝 - <span class="follower-count">44</span></a>
            <a href="https://home.cnblogs.com/u/cxq0017/followees/">关注 - <span class="following-count">1</span></a><br>
        </div>
    </div>
    <div class="clear"></div>
    <div id="author_profile_honor"></div>
    <div id="author_profile_follow" class="follow-tip">
                <a href="javascript:void(0);" onclick="follow(&#39;20a336ef-fc6f-e611-9fc1-ac853d9f53cc&#39;);return false;">+加关注</a>
    </div>
</div>
<div id="div_digg">
    <div class="diggit" onclick="votePost(6497352,&#39;Digg&#39;)">
        <span class="diggnum" id="digg_count">3</span>
    </div>
    <div class="buryit" onclick="votePost(6497352,&#39;Bury&#39;)">
        <span class="burynum" id="bury_count">0</span>
    </div>
    <div class="clear"></div>
    <div class="diggword" id="digg_tips">
    </div>
        <div id="vip_tip"><a class="tip" href="https://cnblogs.vip/" target="_blank">升级成为会员</a></div>
</div>

<script type="text/javascript">
    currentDiggType = 0;
</script>
</div>
    <div class="clear"></div>
    <div id="post_next_prev">

    <a href="https://www.cnblogs.com/cxq0017/p/6490945.html" class="p_n_p_prefix">« </a> 上一篇：    <a href="https://www.cnblogs.com/cxq0017/p/6490945.html" data-featured-image="" title="发布于 2017-03-02 16:10">C++的三大特性：封装、继承和多态性的详解</a>
    <br>
    <a href="https://www.cnblogs.com/cxq0017/p/6514837.html" class="p_n_p_prefix">» </a> 下一篇：    <a href="https://www.cnblogs.com/cxq0017/p/6514837.html" data-featured-image="" title="发布于 2017-03-07 15:05">指针数组和数组指针的区别</a>

</div>
</div>
            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="2766.745057118846" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2017-03-03 16:41" aria-expanded="false">2017-03-03 16:33</span>&nbsp;
<a href="https://www.cnblogs.com/cxq0017">evilsnake</a>&nbsp;
阅读(<span id="post_view_count">8452</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=6497352" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(6497352);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: &#39;&#39;, targetType: &#39;blogPost&#39;, targetId: &#39;6497352&#39;, targetLink: &#39;https://www.cnblogs.com/cxq0017/p/6497352.html&#39;, title: &#39;Windows Socket的UDP和TCP编程介绍&#39; })">举报</a>
</div>
        </div>
	    
	    
    </div><!--end: topics 文章、评论容器-->
</div>
<script>
    var cb_entryId = 6497352, cb_entryCreatedDate = '2017-03-03 16:33', cb_postType = 1, cb_postTitle = 'Windows Socket的UDP和TCP编程介绍';
    var allowComments = true, cb_blogId = 302968, cb_blogApp = 'cxq0017', cb_blogUserGuid = '20a336ef-fc6f-e611-9fc1-ac853d9f53cc';
    mermaidRender.render()
    markdown_highlight()
    zoomManager.apply("#cnblogs_post_body img:not(.code_img_closed):not(.code_img_opened)");    
</script>
<a id="!comments"></a>
<div id="blog-comments-placeholder"></div>
<div id="comment_form" class="commentform">
    <a name="commentform"></a>
    <div id="divCommentShow"></div>
    <div id="comment_nav">
            <a class="comment-nav-left forpc" href="https://cnblogs.vip/" target="_blank">会员力量，点亮园子希望</a>
        <div class="comment-nav-right">
            <span id="span_refresh_tips"></span><a href="https://www.cnblogs.com/cxq0017/p/6497352.html#" onclick="return RefreshPage();">刷新页面</a><a href="https://www.cnblogs.com/cxq0017/p/6497352.html#top">返回顶部</a>
        </div>
    </div>
    <div id="comment_form_container"><div class="login_tips">
    登录后才能查看或发表评论，立即 <a rel="nofollow" href="javascript:void(0);" class="underline" onclick="return account.login(&#39;!comments&#39;);">登录</a> 或者
    <a href="https://www.cnblogs.com/">逛逛</a> 博客园首页
</div>
</div>
    <div class="ad_text_commentbox" id="ad_text_under_commentbox"></div>
        <div id="cnblogs_ch"><a href="https://www.cnblogs.com/cmt/p/18401581" target="_blank" onclick="gtag(&#39;event&#39;, &#39;click&#39;, {&#39;event_category&#39;: &#39;ad&#39;, &#39;event_label&#39;: &#39;T2-博客园-终身会员&#39;})">【推荐】秋天希望的田野，九月最后的救园：终身会员计划</a><br><a href="http://ishell.cc/" target="_blank" onclick="gtag(&#39;event&#39;, &#39;click&#39;, {&#39;event_category&#39;: &#39;ad&#39;, &#39;event_label&#39;: &#39;T2-IShell&#39;})">【推荐】轻量又高性能的 SSH 工具 IShell：AI 加持，快人一步</a><br><a href="http://www.uccpsoft.com/index.htm" target="_blank" onclick="gtag(&#39;event&#39;, &#39;click&#39;, {&#39;event_category&#39;: &#39;ad&#39;, &#39;event_label&#39;: &#39;T2-UCanCode&#39;})">【推荐】100%开源！大型工业跨平台软件C++源码提供，建模，组态！</a><br><a href="https://click.aliyun.com/m/1000396435/" target="_blank" onclick="gtag(&#39;event&#39;, &#39;click&#39;, {&#39;event_category&#39;: &#39;ad&#39;, &#39;event_label&#39;: &#39;T2-阿里云-超值优品季&#39;})">【推荐】2024阿里云超值优品季，精心为您准备的上云首选必备产品</a><br></div>
    <div id="opt_under_post"></div>
        <div id="blog_c1" class="under-post-card">
            <a href="https://www.cnblogs.com/cmt/p/18302049" rel="nofollow" target="_blank" onclick="countCreativeClicks(&#39;C1-博客园-求救信&#39;)">
                <img src="./Windows Socket的UDP和TCP编程介绍 - evilsnake - 博客园_files/35695-20240914114555421-1162088530.jpg" onload="countCreativeImpressions(&#39;C1-博客园-求救信&#39;)" alt="">
                <span id="c1_impression" style="display:none"></span>
            </a>
        </div>
    <div id="under_post_card1"><div class="under-post-card">
<b>编辑推荐：</b>
<br>

· <a href="https://www.cnblogs.com/cmt/p/18432948" target="_blank">风雨过后见彩虹：救园倒计时，最后2天</a>
    <br>
· <a href="https://www.cnblogs.com/charlee44/p/18436647" target="_blank">一次实践：给自己的手机摄像头进行相机标定</a>
    <br>
· <a href="https://www.cnblogs.com/zengzuo613/p/18434300" target="_blank">Linux服务器磁盘空间占用情况分析与清理指南</a>
    <br>
· <a href="https://www.cnblogs.com/jtea/p/18428499" target="_blank">redisson 内存泄漏问题排查</a>
    <br>
· <a href="https://www.cnblogs.com/GuZhenYin/p/18429430" target="_blank">使用.NET并行任务库(TPL)与并行Linq(PLINQ)充分利用多核性能</a>
    <br>
</div></div>
    <div id="under_post_card2"><div class="itnews under-post-card">
    <b>阅读排行：</b>
    <br>
 ·          <a href="https://www.cnblogs.com/alloverzyt/p/18436609" target="_blank">博客园商业化道路建议</a>
        <br>
 ·          <a href="https://www.cnblogs.com/kong-ming/p/18422632" target="_blank">.Net Web项目中，实现轻量级本地事件总线 框架</a>
        <br>
 ·          <a href="https://www.cnblogs.com/1312mn/p/18412658" target="_blank">.NET 开源高性能 MQTT 类库</a>
        <br>
 ·          <a href="https://www.cnblogs.com/shanyou/p/18437145" target="_blank">.NET跨平台绘图基础库--SkiaSharp</a>
        <br>
 ·          <a href="https://www.cnblogs.com/timefiles/p/18436160" target="_blank">C#爬取动态网页上的信息：B站主页</a>
        <br>
</div></div>
    <div id="HistoryToday" class="under-post-card"></div>
    <script type="text/javascript">
        var commentManager = new blogCommentManager();
        commentManager.renderComments(0);
        fixPostBody();
        window.footnoteTipManager.generateFootnoteTips();

            window.tocManager.displayDisableTocTips = false;
            window.tocManager.generateToc();
            
                setTimeout(function() { countViews(cb_blogId, cb_entryId); }, 50);
            
            deliverT2();
            deliverC1C2();
            loadNewsAndKb();
            
                LoadPostCategoriesTags(cb_blogId, cb_entryId);
            
            LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
            GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate, cb_postType);
            loadOptUnderPost();
            GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);
                </script>
</div>

	</div><!--end: forFlow -->
	</div><!--end: mainContent 主体内容容器-->
	<div id="sideBar">
		<div id="sideBarMain">
			<div id="sidebar_news" class="newsItem">
    <h3 class="catListTitle">公告</h3>
<div id="blog-news">    
    <div id="sidebar_news_content"><div class="newsItem">
<img src="./Windows Socket的UDP和TCP编程介绍 - evilsnake - 博客园_files/1019006-20170303172953532-1995114783.jpg">
</div>
<div id="profile_block">
    昵称：
    <a href="https://home.cnblogs.com/u/cxq0017/">
        evilsnake
    </a>
    <br>
    园龄：
    <a href="https://home.cnblogs.com/u/cxq0017/" title="入园时间：2016-09-01">
        8年
    </a>
    <br>
    粉丝：
    <a class="follower-count" href="https://home.cnblogs.com/u/cxq0017/followers/">
        44
    </a>
    <br>
    关注：
    <a class="folowing-count" href="https://home.cnblogs.com/u/cxq0017/followees/">
        1
    </a>
    <div id="p_b_follow" class="follow-tip">
<a href="javascript:void(0)" onclick="follow(&#39;20a336ef-fc6f-e611-9fc1-ac853d9f53cc&#39;)">+加关注</a></div>
    <script>getFollowStatus('20a336ef-fc6f-e611-9fc1-ac853d9f53cc');</script>
</div>
</div>
</div>
<script>loadBlogNews();</script>

 
</div>
<div id="sidebar_c3"></div>
			<div id="blog-calendar" style="">

<table id="blogCalendar" class="Cal" cellspacing="0" cellpadding="0" title="Calendar" border="0">
    <tbody>
        <tr>
            <td colspan="7">
                <table class="CalTitle" cellspacing="0" border="0">
                    <tbody>
                        <tr>
                            <td class="CalNextPrev">
                                <a href="javascript:void(0);" onclick="loadBlogCalendar(&#39;2024/08/29&#39;); return false;">&lt;</a>
                            </td>
                            <td align="center">2024年9月</td>
                            <td align="right" class="CalNextPrev">
                                <a href="javascript:void(0);" onclick="loadBlogCalendar(&#39;2024/10/29&#39;); return false;">&gt;</a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
    <tr>
        <th class="CalDayHeader" align="center" abbr="日" scope="col">日</th>
        <th class="CalDayHeader" align="center" abbr="一" scope="col">一</th>
        <th class="CalDayHeader" align="center" abbr="二" scope="col">二</th>
        <th class="CalDayHeader" align="center" abbr="三" scope="col">三</th>
        <th class="CalDayHeader" align="center" abbr="四" scope="col">四</th>
        <th class="CalDayHeader" align="center" abbr="五" scope="col">五</th>
        <th class="CalDayHeader" align="center" abbr="六" scope="col">六</th>
    </tr>
            <tr>
                        <td class="CalWeekendDay" align="center">
                            1
                        </td>
                        <td class="" align="center">
                            2
                        </td>
                        <td class="" align="center">
                            3
                        </td>
                        <td class="" align="center">
                            4
                        </td>
                        <td class="" align="center">
                            5
                        </td>
                        <td class="" align="center">
                            6
                        </td>
                    <td class="CalWeekendDay" align="center">
                        7
                    </td>
            </tr>
                <tr>
                        <td class="CalWeekendDay" align="center">
                            8
                        </td>
                            <td class="" align="center">
                                9
                            </td>
                            <td class="" align="center">
                                10
                            </td>
                            <td class="" align="center">
                                11
                            </td>
                            <td class="" align="center">
                                12
                            </td>
                            <td class="" align="center">
                                13
                            </td>
                        <td class="CalWeekendDay" align="center">
                            14
                        </td>
                </tr>
                <tr>
                        <td class="CalWeekendDay" align="center">
                            15
                        </td>
                            <td class="" align="center">
                                16
                            </td>
                            <td class="" align="center">
                                17
                            </td>
                            <td class="" align="center">
                                18
                            </td>
                            <td class="" align="center">
                                19
                            </td>
                            <td class="" align="center">
                                20
                            </td>
                        <td class="CalWeekendDay" align="center">
                            21
                        </td>
                </tr>
                <tr>
                        <td class="CalWeekendDay" align="center">
                            22
                        </td>
                            <td class="" align="center">
                                23
                            </td>
                            <td class="" align="center">
                                24
                            </td>
                            <td class="" align="center">
                                25
                            </td>
                            <td class="" align="center">
                                26
                            </td>
                            <td class="" align="center">
                                27
                            </td>
                        <td class="CalWeekendDay" align="center">
                            28
                        </td>
                </tr>
                <tr>
                        <td class="CalTodayDay" align="center">
                            29
                        </td>
                            <td class="" align="center">
                                30
                            </td>
                            <td class="CalOtherMonthDay" align="center">
                                1
                            </td>
                            <td class="CalOtherMonthDay" align="center">
                                2
                            </td>
                            <td class="CalOtherMonthDay" align="center">
                                3
                            </td>
                            <td class="CalOtherMonthDay" align="center">
                                4
                            </td>
                        <td class="CalOtherMonthDay" align="center">
                            5
                        </td>
                </tr>
                <tr>
                        <td class="CalOtherMonthDay" align="center">
                            6
                        </td>
                            <td class="CalOtherMonthDay" align="center">
                                7
                            </td>
                            <td class="CalOtherMonthDay" align="center">
                                8
                            </td>
                            <td class="CalOtherMonthDay" align="center">
                                9
                            </td>
                            <td class="CalOtherMonthDay" align="center">
                                10
                            </td>
                            <td class="CalOtherMonthDay" align="center">
                                11
                            </td>
                        <td class="CalOtherMonthDay" align="center">
                            12
                        </td>
                </tr>
    </tbody>
</table></div><script>loadBlogDefaultCalendar();</script>			
			<div id="leftcontentcontainer">
				<div id="blog-sidecolumn"><!-- 搜索 -->
<div id="sidebar_search" class="sidebar-block">
    <div class="mySearch my-search">
        <h3 class="catListTitle">搜索</h3>
        <div id="sidebar_search_box">
            <div id="widget_my_zzk" class="div_my_zzk">
                <input type="text" id="q" onkeydown="return zzk_go_enter(event);" class="input_my_zzk">&nbsp;<input onclick="zzk_go()" type="button" value="找找看" id="btnZzk" class="btn_my_zzk">
            </div>
            
        </div>
    </div>
</div>

<!-- 常用链接 -->
<div id="sidebar_shortcut" class="sidebar-block"><div class="catListLink">
<h3 class="catListTitle">
常用链接
</h3>
<ul>
    <li><a href="https://www.cnblogs.com/cxq0017/p/" title="我的博客的随笔列表">我的随笔</a></li>
<li><a href="https://www.cnblogs.com/cxq0017/MyComments.html" title="我的发表过的评论列表">我的评论</a></li>
<li><a href="https://www.cnblogs.com/cxq0017/OtherPosts.html" title="我评论过的随笔列表">我的参与</a></li>
<li><a href="https://www.cnblogs.com/cxq0017/comments" title="我的博客的评论列表">最新评论</a></li>
<li><a href="https://www.cnblogs.com/cxq0017/tag/" title="我的博客的标签列表">我的标签</a></li>

</ul>
</div>

</div>

<!-- 最新随笔 -->


<!-- 我的标签 -->
<div id="sidebar_toptags" class="sidebar-block"></div>

<!-- 积分与排名 -->
<div id="sidebar_scorerank" class="sidebar-block"><div class="catListBlogRank">
<h3 class="catListTitle">积分与排名</h3>
<ul>
	<li class="liScore">
		积分 -	
92145
	</li>
	<li class="liRank">
		排名 -	
16879
	</li>
</ul>
</div>



</div>

<!-- 随笔分类、随笔档案、文章分类、新闻分类、相册、链接 -->
<div id="sidebar_categories">

    <div id="sidebar_postcategory" class="catListPostCategory sidebar-block">
        <h3 class="catListTitle">
            
    <a class="sidebar-card-title-a" href="https://www.cnblogs.com/cxq0017/post-categories">随笔分类</a>



        </h3>

        <ul>

                <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/cxq0017/category/940652.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">ACE(3)</a>
 
                </li>                
                <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/cxq0017/category/960599.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">C(1)</a>
 
                </li>                
                <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/cxq0017/category/876891.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">C#(2)</a>
 
                </li>                
                <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/cxq0017/category/876208.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">c++(22)</a>
 
                </li>                
                <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/cxq0017/category/1299196.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">Git(16)</a>
 
                </li>                
                <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/cxq0017/category/876212.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">MySQL(5)</a>
 
                </li>                
                <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/cxq0017/category/1239784.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">Python(6)</a>
 
                </li>                
                <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/cxq0017/category/876211.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">Unity3D(4)</a>
 
                </li>                
            
        </ul>


    </div>    
    <div id="sidebar_postarchive" class="catListPostArchive sidebar-block">
        <h3 class="catListTitle">
            
随笔档案


        </h3>

        <ul>

                <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/cxq0017/p/archive/2019/04" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2019年4月(2)</a>
 
                </li>                
                <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/cxq0017/p/archive/2019/03" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2019年3月(3)</a>
 
                </li>                
                <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/cxq0017/p/archive/2019/02" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2019年2月(1)</a>
 
                </li>                
                <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/cxq0017/p/archive/2018/09" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2018年9月(17)</a>
 
                </li>                
                <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/cxq0017/p/archive/2018/08" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2018年8月(3)</a>
 
                </li>                
                <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/cxq0017/p/archive/2018/07" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2018年7月(7)</a>
 
                </li>                
                <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/cxq0017/p/archive/2018/06" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2018年6月(1)</a>
 
                </li>                
                <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/cxq0017/p/archive/2017/03" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2017年3月(14)</a>
 
                </li>                
                <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/cxq0017/p/archive/2017/02" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2017年2月(7)</a>
 
                </li>                
                <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/cxq0017/p/archive/2017/01" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2017年1月(1)</a>
 
                </li>                
                <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/cxq0017/p/archive/2016/11" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2016年11月(4)</a>
 
                </li>                
                <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/cxq0017/p/archive/2016/09" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2016年9月(6)</a>
 
                </li>                
            
        </ul>


    </div>    
</div>

<!-- 最新评论 -->
<!-- 阅读排行榜 -->
<div id="sidebar_topviewedposts" class="sidebar-block"><div class="catListView">
    <h3 class="catListTitle">
        <a href="https://www.cnblogs.com/cxq0017/most-viewed" class="sidebar-card-title-a">
    阅读排行榜
</a>

    </h3>
    <div id="TopViewPostsBlock">
        <ul style="word-break:break-all">
                    <li>
                        <a href="https://www.cnblogs.com/cxq0017/p/6076856.html">
                            1. C++ 类模板与模板类详解(117748)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/cxq0017/p/6074247.html">
                            2. C++ 多态的实现及原理(105098)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/cxq0017/p/6555533.html">
                            3. C++ STL基本容器使用(65965)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/cxq0017/p/9636083.html">
                            4. GitHub从注册到使用(22257)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/cxq0017/p/6544517.html">
                            5. c++设计模式之工厂模式(21619)
                        </a>
                    </li>
        </ul>
    </div>
</div></div>

<!-- 评论排行榜 -->
<div id="sidebar_topcommentedposts" class="sidebar-block"><div class="catListFeedback">
    <h3 class="catListTitle">
        <a href="https://www.cnblogs.com/cxq0017/most-commented" class="sidebar-card-title-a">评论排行榜</a>

    </h3>
    <div id="TopFeedbackPostsBlock">
        <ul style="word-break:break-all">
                    <li>
                        <a href="https://www.cnblogs.com/cxq0017/p/6074247.html">
                            1. C++ 多态的实现及原理(5)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/cxq0017/p/6544517.html">
                            2. c++设计模式之工厂模式(4)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/cxq0017/p/6076856.html">
                            3. C++ 类模板与模板类详解(4)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/cxq0017/p/6074584.html">
                            4. 有意思的c++题目(3)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/cxq0017/p/6385144.html">
                            5. ACE工具概述(2)
                        </a>
                    </li>
        </ul>
    </div>
</div></div>

<!-- 推荐排行榜 -->
<div id="sidebar_topdiggedposts" class="sidebar-block">
<div id="topdigg_posts_wrap">
    <div class="catListView">
        <h3 class="catListTitle">
            <a href="https://www.cnblogs.com/cxq0017/most-liked" class="sidebar-card-title-a">推荐排行榜</a>

        </h3>
        <div id="TopDiggPostsBlock">
            <ul style="word-break: break-all">
                        <li>
                            <a href="https://www.cnblogs.com/cxq0017/p/6074247.html">
                                1. C++ 多态的实现及原理(20)
                            </a>
                        </li>
                        <li>
                            <a href="https://www.cnblogs.com/cxq0017/p/6076856.html">
                                2. C++ 类模板与模板类详解(13)
                            </a>
                        </li>
                        <li>
                            <a href="https://www.cnblogs.com/cxq0017/p/10620273.html">
                                3. C++ 拷贝构造函数和赋值运算符(6)
                            </a>
                        </li>
                        <li>
                            <a href="https://www.cnblogs.com/cxq0017/p/5844096.html">
                                4. C# 枚举器(4)
                            </a>
                        </li>
                        <li>
                            <a href="https://www.cnblogs.com/cxq0017/p/9636083.html">
                                5. GitHub从注册到使用(3)
                            </a>
                        </li>
            </ul>
        </div>
    </div>
</div></div><div id="sidebar_recentcomments" class="sidebar-block"><div class="catListComment">
<h3 class="catListTitle"><a href="https://www.cnblogs.com/cxq0017/comments" class="sidebar-card-title-a">最新评论</a></h3>
    <div class="RecentCommentBlock">
        <ul>
                <li class="recent_comment_title"><a href="https://www.cnblogs.com/cxq0017/p/6074584.html">1. Re:有意思的c++题目</a></li>
                <li class="recent_comment_body">@ https：//blog.csdn.net/u013451798/article/details/51534449?utm_medium=distribute.pc_relevant.none-t...</li>
                <li class="recent_comment_author">--loxirain</li>
                <li class="recent_comment_title"><a href="https://www.cnblogs.com/cxq0017/p/6074584.html">2. Re:有意思的c++题目</a></li>
                <li class="recent_comment_body"><p>@<br>
这个博主写的挺清楚</p>
</li>
                <li class="recent_comment_author">--loxirain</li>
                <li class="recent_comment_title"><a href="https://www.cnblogs.com/cxq0017/p/6074584.html">3. Re:有意思的c++题目</a></li>
                <li class="recent_comment_body"><p>第一个问题中，是因为没有指定是对哪个类的变量赋值，可以通过类名和::运算符确定变量</p>
</li>
                <li class="recent_comment_author">--loxirain</li>
                <li class="recent_comment_title"><a href="https://www.cnblogs.com/cxq0017/p/9645944.html">4. Re:Git---创建版本库</a></li>
                <li class="recent_comment_body"><p>他妈的10个人10个用cmd</p>
</li>
                <li class="recent_comment_author">--尼古拉斯-菜鸟</li>
                <li class="recent_comment_title"><a href="https://www.cnblogs.com/cxq0017/p/6076856.html">5. Re:C++ 类模板与模板类详解</a></li>
                <li class="recent_comment_body">最后一段比较形象！赞一个</li>
                <li class="recent_comment_author">--天性</li>
        </ul>
    </div>
</div>

</div>


</div>
                    <script>loadBlogSideColumn();</script>
			</div>			
		</div><!--end: sideBarMain -->
	</div><!--end: sideBar 侧边栏容器 -->
	<div class="clear"></div>
	</div><!--end: main -->
	<div class="clear"></div>
	<div id="footer">
		<!--done-->
Copyright © 2024 evilsnake
<br><span id="poweredby">Powered by .NET 8.0 on Kubernetes</span>



	</div><!--end: footer -->
</div><!--end: home 自定义的最大容器 -->



    

    <input type="hidden" id="antiforgery_token" value="CfDJ8AOXHS93SCdEnLt5HW8VuxQP0ta_G9XBIhl4tFjHH26ELI7ZAtUC98He2T6JkmDW5cb0XsVFQTqpVPabyMt-qm7IrSiYyoUJRUpUoS_xsZ34VM94cvtd1S6hS4B6Jn9xpgg0pKhVqi2g6vPdqe05epU">
    <script async="" src="./Windows Socket的UDP和TCP编程介绍 - evilsnake - 博客园_files/js"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-M95P3TTWJZ');
</script>
<script defer="" src="./Windows Socket的UDP和TCP编程介绍 - evilsnake - 博客园_files/hm.js.下载"></script>


<div style="z-index: 998; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.6); display: none; flex-direction: column; align-items: center; justify-content: center">
<div style="background: #fff;padding: 30px; margin: 30px; border-radius: 16px;">
  <div style="width: 200px; height: 200px; background: rgba(255, 255, 255, 0.8); position: absolute; top: -100px; right: -100px; border-radius: 100px"></div>
  <div style="text-align: center; font-size: 18px; margin-bottom: 10px;">点击右上角即可分享</div>
  <img src="./Windows Socket的UDP和TCP编程介绍 - evilsnake - 博客园_files/35695-20230906145857937-1471873834.gif" alt="微信分享提示">
</div>   
    </div><button class="charm-bar-item charm-bar-handle hidden" type="button" title="显示工具栏"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="logo">
  <style>
    .main {
      fill: #FFF;
    }

    @media (prefers-color-scheme: dark) {
      .main {
        fill: #59E8EB;
      }
    }
  </style>
  <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
    <g transform="translate(-240.000000, -192.000000)">
      <g id="VIP_3_line" transform="translate(240.000000, 192.000000)">
        <path d="M24,0 L24,24 L0,24 L0,0 L24,0 Z M12.5934901,23.257841 L12.5819402,23.2595131 L12.5108777,23.2950439 L12.4918791,23.2987469 L12.4918791,23.2987469 L12.4767152,23.2950439 L12.4056548,23.2595131 C12.3958229,23.2563662 12.3870493,23.2590235 12.3821421,23.2649074 L12.3780323,23.275831 L12.360941,23.7031097 L12.3658947,23.7234994 L12.3769048,23.7357139 L12.4804777,23.8096931 L12.4953491,23.8136134 L12.4953491,23.8136134 L12.5071152,23.8096931 L12.6106902,23.7357139 L12.6232938,23.7196733 L12.6232938,23.7196733 L12.6266527,23.7031097 L12.609561,23.275831 C12.6075724,23.2657013 12.6010112,23.2592993 12.5934901,23.257841 L12.5934901,23.257841 Z M12.8583906,23.1452862 L12.8445485,23.1473072 L12.6598443,23.2396597 L12.6498822,23.2499052 L12.6498822,23.2499052 L12.6471943,23.2611114 L12.6650943,23.6906389 L12.6699349,23.7034178 L12.6699349,23.7034178 L12.678386,23.7104931 L12.8793402,23.8032389 C12.8914285,23.8068999 12.9022333,23.8029875 12.9078286,23.7952264 L12.9118235,23.7811639 L12.8776777,23.1665331 C12.8752882,23.1545897 12.8674102,23.1470016 12.8583906,23.1452862 L12.8583906,23.1452862 Z M12.1430473,23.1473072 C12.1332178,23.1423925 12.1221763,23.1452606 12.1156365,23.1525954 L12.1099173,23.1665331 L12.0757714,23.7811639 C12.0751323,23.7926639 12.0828099,23.8018602 12.0926481,23.8045676 L12.108256,23.8032389 L12.3092106,23.7104931 L12.3186497,23.7024347 L12.3186497,23.7024347 L12.3225043,23.6906389 L12.340401,23.2611114 L12.337245,23.2485176 L12.337245,23.2485176 L12.3277531,23.2396597 L12.1430473,23.1473072 Z" id="MingCute" fill-rule="nonzero"></path>
        <path class="main" d="M2.33789,4.86283 C1.86918,4.02957 2.47132,3 3.42736,3 L9.70837,3 C10.2488,3 10.7475,3.29076 11.0138,3.7611 L12.9999,7.26995 L14.986,3.7611 C15.2523,3.29076 15.7509,3 16.2914,3 L20.5724,3 C21.5285,3 22.1306,4.02957 21.6619,4.86282 L13.0894,20.1029 C12.6115,20.9525 11.3883,20.9525 10.9104,20.1029 L2.33789,4.86283 Z M4.70974,5 L11.9999,17.9603 L19.29,5 L16.5829,5 L12.9999,11.3301 L9.41685,5 L4.70974,5 Z"></path>
      </g>
    </g>
  </g>
</svg> </button><div class="charm-bar-wrapper"><div class="charm-bar-main"><div class="charm-bar-panel inactive hidden"></div><div class="charm-bar"><a class="charm-bar-item tongyi" target="_blank" title="博客园会员" href="https://www.cnblogs.com/cmt/p/18432948">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="logo">
        <style>
          .main {
            fill: #FFF;
          }

          @media (prefers-color-scheme: dark) {
            .main {
              fill: #59E8EB;
            }
          }
        </style>
        <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
          <g transform="translate(-240.000000, -192.000000)">
            <g id="VIP_3_line" transform="translate(240.000000, 192.000000)">
              <path d="M24,0 L24,24 L0,24 L0,0 L24,0 Z M12.5934901,23.257841 L12.5819402,23.2595131 L12.5108777,23.2950439 L12.4918791,23.2987469 L12.4918791,23.2987469 L12.4767152,23.2950439 L12.4056548,23.2595131 C12.3958229,23.2563662 12.3870493,23.2590235 12.3821421,23.2649074 L12.3780323,23.275831 L12.360941,23.7031097 L12.3658947,23.7234994 L12.3769048,23.7357139 L12.4804777,23.8096931 L12.4953491,23.8136134 L12.4953491,23.8136134 L12.5071152,23.8096931 L12.6106902,23.7357139 L12.6232938,23.7196733 L12.6232938,23.7196733 L12.6266527,23.7031097 L12.609561,23.275831 C12.6075724,23.2657013 12.6010112,23.2592993 12.5934901,23.257841 L12.5934901,23.257841 Z M12.8583906,23.1452862 L12.8445485,23.1473072 L12.6598443,23.2396597 L12.6498822,23.2499052 L12.6498822,23.2499052 L12.6471943,23.2611114 L12.6650943,23.6906389 L12.6699349,23.7034178 L12.6699349,23.7034178 L12.678386,23.7104931 L12.8793402,23.8032389 C12.8914285,23.8068999 12.9022333,23.8029875 12.9078286,23.7952264 L12.9118235,23.7811639 L12.8776777,23.1665331 C12.8752882,23.1545897 12.8674102,23.1470016 12.8583906,23.1452862 L12.8583906,23.1452862 Z M12.1430473,23.1473072 C12.1332178,23.1423925 12.1221763,23.1452606 12.1156365,23.1525954 L12.1099173,23.1665331 L12.0757714,23.7811639 C12.0751323,23.7926639 12.0828099,23.8018602 12.0926481,23.8045676 L12.108256,23.8032389 L12.3092106,23.7104931 L12.3186497,23.7024347 L12.3186497,23.7024347 L12.3225043,23.6906389 L12.340401,23.2611114 L12.337245,23.2485176 L12.337245,23.2485176 L12.3277531,23.2396597 L12.1430473,23.1473072 Z" id="MingCute" fill-rule="nonzero"></path>
              <path class="main" d="M2.33789,4.86283 C1.86918,4.02957 2.47132,3 3.42736,3 L9.70837,3 C10.2488,3 10.7475,3.29076 11.0138,3.7611 L12.9999,7.26995 L14.986,3.7611 C15.2523,3.29076 15.7509,3 16.2914,3 L20.5724,3 C21.5285,3 22.1306,4.02957 21.6619,4.86282 L13.0894,20.1029 C12.6115,20.9525 11.3883,20.9525 10.9104,20.1029 L2.33789,4.86283 Z M4.70974,5 L11.9999,17.9603 L19.29,5 L16.5829,5 L12.9999,11.3301 L9.41685,5 L4.70974,5 Z"></path>
            </g>
          </g>
        </g>
      </svg>
      <svg viewBox="0 0 499 120" width="110" height="40" fill="#fff" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="2"><path d="M.502 81.25c3.712-2.432 9.088-6.144 16.384-11.392 7.296-5.248 12.16-8.832 14.72-10.88l1.024 7.808 1.024 6.528c-1.536 1.152-6.144 4.736-13.696 10.624-6.272 4.864-11.136 8.704-14.848 11.52L.502 81.25zm1.664-60.544H60.79v14.592H2.166V20.706zm69.376 13.312l4.224-15.616h39.296v15.616h-43.52zM38.39 57.442c2.176-2.688 4.224-5.76 6.4-8.96 2.176-3.328 4.224-6.528 6.016-9.6l9.856 7.04a254.37 254.37 0 01-6.4 10.112c-2.176 3.456-4.352 6.528-6.272 9.216l-9.6-7.808zM10.742 38.754c2.688 3.712 4.992 6.656 6.656 9.088l3.456 4.992a70.834 70.834 0 013.072 4.48l-9.984 7.808C9.59 57.954 5.366 51.554 1.398 45.794l9.344-7.04zm32 26.752c3.2 2.56 6.784 5.504 10.752 8.96 3.968 3.328 7.68 6.4 11.008 9.088l-8.448 11.008c-2.944-2.816-6.528-6.016-10.624-9.472-3.968-3.584-7.552-6.784-10.752-9.472l8.064-10.112zm7.04-65.28c1.408 1.28 4.48 4.48 9.344 9.472.64.64 1.152 1.152 1.536 1.664a7.335 7.335 0 011.408 1.408l-8.064 8.192a839.703 839.703 0 00-3.328-3.712c-1.536-1.664-3.072-3.2-4.608-4.736-1.408-1.536-2.816-2.944-4.096-4.352L49.782.226zm-32.64 102.272c2.176 0 3.712-.128 4.736-.512 1.024-.384 1.664-.896 2.048-1.792.384-.896.64-2.176.64-3.968V2.274H39.03v101.12c0 5.12-1.28 8.704-3.84 10.752-2.432 2.176-6.784 3.2-13.056 3.2H9.462l-2.688-14.848h10.368zm37.76-52.992c4.736-7.04 8.704-14.848 11.904-23.424 3.2-8.576 5.632-17.28 7.04-25.856l13.952 3.072C85.622 13.922 82.55 23.906 78.71 33.25c-3.712 9.216-9.088 19.584-16.128 31.232l-7.68-14.976zm-3.84 57.344c11.008-7.552 19.456-14.976 25.344-22.4 5.888-7.424 10.112-15.488 12.672-24.192 2.688-8.704 4.608-19.712 5.76-33.024h13.312c-1.28 15.744-3.584 29.056-7.04 39.936-3.456 10.88-8.32 20.48-14.592 28.672s-14.72 16-25.088 23.424L51.062 106.85zm25.472-75.136c.64 11.008 2.432 20.736 5.12 29.184a72.453 72.453 0 0012.672 23.04c5.632 6.784 12.928 13.184 22.016 18.944l-8.832 15.616c-9.216-7.296-16.768-14.848-22.528-22.528-5.76-7.808-10.112-16-13.312-24.704-3.072-8.704-5.12-18.432-6.272-29.312l11.136-10.24zM128.374 94.434l57.728-5.888-.128 14.72-56.192 6.528-1.408-15.36zm14.848-59.776h31.232v13.824h-31.232V34.658zm.128 27.904h31.232V76.13H143.35V62.562zm95.744-39.68c-.384 13.568-.896 27.776-1.408 42.496-.512 14.72-.896 25.856-1.28 33.152-.128 4.48-.896 7.808-2.304 10.24-1.28 2.432-3.328 4.096-6.144 4.992-2.688 1.024-6.528 1.536-11.52 1.536H204.79l-2.816-14.464h8.704c3.328 0 5.76-.256 7.296-.64 1.536-.512 2.56-1.408 3.2-2.56.64-1.152.896-3.072 1.024-5.632.256-5.632.64-16.64 1.28-32.896.384-12.416.64-19.584.64-21.632h-38.656V22.882h53.632zm-61.44 83.968c4.736-5.888 8.32-11.264 10.752-16 2.432-4.736 4.096-10.88 5.248-18.176 1.152-7.296 1.92-17.536 2.304-30.592.128-3.2.256-11.008.384-23.424 0-5.248 0-11.392.128-18.304h14.592c-.128 4.864-.256 11.52-.384 19.84s-.256 16-.512 23.168c-.512 14.336-1.408 25.728-2.816 34.048-1.28 8.32-3.456 15.616-6.4 21.888-2.944 6.144-7.424 12.928-13.312 20.224l-9.984-12.672zM135.414 5.218h45.824v86.144h-14.08V19.81h-17.664v76.544h-14.08V5.218zM269.174 99.298h88.064v13.312h-88.064V99.298zm16.768-73.088h56.96v12.928h-56.96V26.21zm-5.376 21.76h66.944v12.672h-66.944V47.97zm35.2 6.528h12.928v23.68c0 1.408.256 2.304.64 2.816.384.384 1.28.64 2.432.64h1.792c1.152 0 2.048-.128 2.688-.256.64-.256 1.024-.64 1.152-1.28.256-.64.384-1.792.512-3.2.128-.768.128-1.664.128-2.56v-6.4l10.368 1.792c0 1.664 0 3.712-.128 6.016-.128 2.176-.128 4.224-.256 5.888-.256 3.072-.768 5.504-1.536 7.296-.64 1.664-1.792 2.944-3.456 3.84-1.664.768-3.84 1.152-6.656 1.152h-9.088c-4.096 0-7.04-1.024-8.832-2.944-1.792-1.92-2.688-5.376-2.688-10.112V54.498zm-36.864 32c3.456-2.176 6.144-4.224 8.064-6.144 1.92-2.048 3.456-4.224 4.48-6.528 1.024-2.432 1.664-5.376 2.048-8.832.128-1.536.128-4.48.256-8.704h13.568c-.128 4.48-.256 7.68-.384 9.6-.384 4.992-1.28 9.344-2.56 12.8a28.99 28.99 0 01-5.76 9.472c-2.56 2.816-6.016 5.76-10.368 8.96l-9.344-10.624zM261.11 3.81h105.728v114.688h-14.72V18.146H276.47v100.352h-15.36V3.81zM491.254 7.01v15.232L451.19 49.25v50.304c0 4.48-.64 8.064-1.792 10.496-1.152 2.432-3.2 4.224-6.016 5.248-2.816 1.152-6.784 1.664-11.904 1.664h-17.664l-3.2-16.128h15.36c2.688 0 4.48-.128 5.632-.512 1.152-.384 1.92-1.152 2.304-2.048.384-1.024.64-2.688.64-4.992V41.698l31.104-19.584h-70.4V7.01h96zm6.784 45.952v15.104H385.91V52.962h112.128z" fill-rule="nonzero"></path></svg>
      </a><button class="charm-bar-item" type="button" title="隐藏工具栏"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="size-6">
  <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5"></path>
</svg>
</button></div></div></div></body></html>