define("common-jquery:widget/popup-2021/popup-2021.js",function(e,o,t){var p=e("common-jquery:widget/lib/jquery/jquery.js"),n=e("common-jquery:widget/js/util/event/event.js"),i=e("common-jquery:widget/popup-2021/weekly/weekly.js"),a=e("common-jquery:widget/popup-2021/first-exp/first-exp.js"),s=e("common-jquery:widget/popup-2021/first-quality/first-quality.js"),u=e("common-jquery:widget/popup-2021/new-achievement/new-achievement.js"),r=e("common-jquery:widget/popup-2021/ten-thousand-show/ten-thousand-show.js"),d=p(document),c=p(document.body),l="#wgt-popup",m=[],y=0,h={weekly:"Weekly",firstExp:"FirstExp",firstQuality:"FirstQuality",newAchievement:"NewAchievement",tenThousandShow:"TenThousandShow"},w={init:function(e){try{var o=this;e&&(p.ajax({url:"/notice/getinitdata",method:"GET",dataType:"json",data:{},success:function(e){if(0===+e.errCode){var t=e.data||{};m=t.popupInfo||[];var p=m[y];o.showPopup(p)}}}),o.eventHandler())}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message,path:"common-jquery:widget/popup-2021/popup-2021.js",method:"",ln:65})}},eventHandler:function(){var e=this,o=p(l);n.on("close-dialog",function(){var t=m[y];if(t){var n=t.popupItem,i={popupType:t.popupType};t.popupType===h.newAchievement?i.levelId=n.levelId:t.popupType===h.tenThousandShow&&(i.eid=n.eid),p.ajax({url:"/notice/setpopinfo",method:"POST",dataType:"json",data:i}),y++,m[y]?(o.empty(),e.showPopup(m[y])):(o.hide(),d.removeClass("no-scroll"),c.removeClass("no-scroll"))}})},showPopup:function(e){if(e){var o=!0,t=e.popupItem||{};switch(t.targetEle=l,e.popupType){case h.newAchievement:u.init(t);break;case h.tenThousandShow:r.init(t);break;case h.weekly:i.init(t);break;case h.firstQuality:s.init(t);break;case h.firstExp:a.init(t);break;default:o=!1}o&&(c.addClass("no-scroll"),d.addClass("no-scroll"))}}};t.exports=w});