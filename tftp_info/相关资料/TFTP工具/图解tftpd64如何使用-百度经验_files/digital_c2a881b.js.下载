define("article:widget/income-money/digital/digital.js",function(n,t,i){function e(n){this.initPos=null,this.endPos=null,this.currentPos=[],this.intervalPos=null,this.children=null,this.startTime=(new Date).getTime(),this._options={containerId:"",num:0,numWidth:24,numHeight:28,duration:1e3,interval:50,realtimeUpdate:0,updatePattern:0},this.init(n)}var o=n("common-jquery:widget/lib/tangram/base/base.js"),s=n("common-jquery:widget/js/util/event/event.js");n("common-jquery:widget/lib/tangram/fx/Timeline/Timeline.js"),e.prototype={init:function(n){var t=this;n&&n.containerId&&n.num&&(o.object.extend(t._options,n),t.children=o.q("num0",t._options.containerId),null!=t.children&&0!=t.children.length&&(s.on(t._options.containerId+".ready",function(){t.start()}),t.initPosition()))},initPosition:function(n){var t=this,i=t._options.num+"";t.initPos=[],t.endPos=[],t.intervalPos=[];var e=t._options.duration/t._options.interval,r=1*t._options.numHeight+1,a="",u=261;if(n&&i.length!=o.dom.query(".digital-container .num0").length){var d=[];o.each(i,function(){d.push('<span class="num0"></span>')}),o.dom.query(".digital-container")[0].innerHTML=d.join(""),t.children=o.q("num0",t._options.containerId)}for(var l=0,c=i.length;c>l;l++)a=parseInt(i.charAt(l))*r,t.endPos.push(u+a),t.intervalPos.push(a/e),t.initPos.push(n?t.currentPos[l]!=t.endPos[l]?u:t.currentPos[l]+t.numHeight:u);s.fire(t._options.containerId+".ready")},start:function(){var n=this,t=new o.fx.Timeline({duration:n._options.duration,interval:n._options.interval,render:function(t){1!=t&&n._update()},finish:function(){n.finalPostion(),n._options.realtimeUpdate&&n.update()}});t.launch()},_update:function(){for(var n=this,t=0,i=n.children.length;i>t;t++)n.initPos[t]+=n.intervalPos[t],o.dom.setStyle(n.children[t],"background-position","0 -"+n.initPos[t]+"px")},finalPostion:function(){for(var n=this,t=0,i=n.children.length;i>t;t++)o.dom.setStyle(n.children[t],"background-position","0 -"+n.endPos[t]+"px"),n.currentPos[t]=n.endPos[t]},update:function(n){var t=this,n=parseInt(t._options.updatePattern)||Math.round(10*Math.random());(new Date).getTime()>t.startTime+6e4||setTimeout(function(){t._options.num=parseInt(t._options.num)+n,t.initPosition(!0)},t._options.addInterval||2e3)}},i.exports=e});