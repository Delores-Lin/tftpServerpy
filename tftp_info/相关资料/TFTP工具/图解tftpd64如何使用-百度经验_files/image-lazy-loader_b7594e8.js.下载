define("article:widget/ui/image-lazy-loader/image-lazy-loader.js",function(t,e,n){var o=t("common-jquery:widget/lib/tangram/base/base.js"),i=t("article:widget/ui/image-lazy-loader/base.js"),a=window,r=document,l="scroll",s="touchmove",m="resize",d="data-src",g=100;t("common-jquery:widget/lib/tangram/fx/fadeIn/fadeIn.js");var c=function(t){var e=this,n=t.container?o.g(t.container):r;e.containers=o.lang.toArray(n),e.option={imgCls:"lazy-load-img",autoDestroy:!0,isCheckAttr:"data-is-check",imgAttr:["width","height","style"]},e.imageEls=[],e.remainEls=[],t=t||{},o.object.extend(e.option,t),e._init()};c.prototype={_init:function(){var t=this;t._filterItems(),0!=t._getItemsLength()&&t._initLoadEvent()},_filterItems:function(){var t=this;t.imageEls=o.lang.toArray(o.q(t.option.imgCls))},_initLoadEvent:function(){var t=this,e=t.option.autoDestroy,n=function(){t._loadItems(),e&&0==t._getItemsLength()&&t.destroy()};loadLazyImg=function(){setTimeout(n,g)},o.event.on(a,l,loadLazyImg),o.event.on(a,s,loadLazyImg),o.event.on(a,m,loadLazyImg),t._loadFn=loadLazyImg,t._getItemsLength()&&o.dom.ready(n)},_loadItems:function(){var t=this;t.imageEls=o.array.filter(t.imageEls,t._loadImg,t)},_loadImg:function(t){var e=this,n=d,a=o.dom.getAttr(t,n);if(!a)return!1;if(i.inDocument(t)){if(!i._checkElemInViewport(t,e.containers))return!0;e._loadImgSrc(t,a)}else;},_loadImgSrc:function(t,e){var n=this,i=d;e&&t.src!=e&&(t.onload=function(){var e=this;if(!e.src.match(/exp_loading\.gif/i)){if(o.dom.getAttr(e,n.option.isCheckAttr))for(var i=null,a=n.option.imgAttr,r=a.length-1;r>=0;r--)i=o.dom.getAttr(e,"data-"+a[r]),i&&(o.dom.setAttr(e,a[r],i),e.removeAttribute("data-"+a[r]),i=null);o.fx.fadeIn(t,{duration:800}),o.dom.removeClass(t,n.option.imgCls),e.onload=null}},t.src=e,t.removeAttribute(i))},_getItemsLength:function(){var t=this;return t.imageEls.length},destroy:function(){var t=this,e=t._loadFn;o.event.un(a,l,e),o.event.un(a,s,e),o.event.un(a,m,e)}},n.exports=c});